#+TITLE: My Emacs configuration files.


This repository is settings for my Emacs.

|--------------------------------+-----------------------------------------------|
| File                           |                                               |
|--------------------------------+-----------------------------------------------|
| ./init.el                      | Remember, the Force will be with you, always. |
| ./themes/sximada-dark-theme.el | That leads to the dark side.                  |
|--------------------------------+-----------------------------------------------|

* Setup

#+begin_example
git clone git@github.com:TakesxiSximada/emacs.d.git ~/.emacs.d
#+end_example

#+BEGIN_EXAMPLE
pip3 install -U --user -r python-mode-requirements.txt
#+END_EXAMPLE

#+BEGIN_EXAMPLE
npm install -g prettier
#+END_EXAMPLE

* è¡¨ç¤º

å¯è¦–æ€§ã®å‘ä¸Šã®ãŸã‚ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®è¡Œã«ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤ºã—èƒŒæ™¯è‰²ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(global-hl-line-mode 1)
(set-face-attribute hl-line-face nil :underline nil :background "#3f3f4f")
#+end_src

* ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®åˆ†å‰²è¡¨ç¤º

Emacsã«ãŠã„ã¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¯Emacsã®ç”»é¢(ãƒ•ãƒ¬ãƒ¼ãƒ )å†…ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹é ˜åŸŸã§
ã™ã€‚é€šå¸¸ã®OSãªã©ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹é ˜åŸŸã¯Emacsã§ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ã¨å‘¼
ã³ã¾ã™ã€‚

ã§ãã‚‹é™ã‚Šæ–‡å­—ã‚’å¤šãè¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å¹…ã‚’å°ã•ãã—ç·šã§åˆ†å‰²ã—
ã¾ã™ã€‚ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤ºã—ãªã„å ´åˆã€ä¸Šä¸‹ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å¢ƒç•ŒãŒã‚ã‹ã‚‰ãªã
ãªã£ã¦ã—ã¾ã†ã®ã§ä¸‹å´ã«ã‚‚åˆ†å‰²ç·šã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq window-divider-default-right-width 1)
(setq window-divider-default-bottom-width 1)
(setq window-divider-default-places t)
(window-divider-mode)
#+end_src

* mode-line

ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã¯æœ¬å½“ã«å¿…è¦ã§ã—ã‚‡ã†ã‹ï¼Ÿç”»é¢ä¸Šã«å¿…è¦ã®ãªã„æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¦
ã„ã‚‹ã“ã¨ã§ç€ãŒæ•£ã£ã¦ã—ã¾ã„ã¾ã™ã€‚æœ€åˆã¯ç„¡åŠ¹ã«ã—ã€ãã‚Œãã‚Œã®å¿…è¦æ€§ã«å¿œã˜
ã¦æˆé•·ã•ã›ã¦ã„ãã“ã§è‡ªåˆ†ã®ãƒ‹ãƒ¼ã‚ºã«ã‚ã£ãŸãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã«æˆé•·ã—ã¦ã„ãã¾ã™ã€‚
ãã®ãŸã‚ã“ã“ã§ã¯ç„¡åŠ¹ã«ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq-default mode-line-format nil)
#+end_src

* ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã®å¤‰æ›´

#+begin_src emacs-lisp
(bind-key* "s-<up>" (lambda () (interactive) (window-resize nil -1)))
(bind-key* "s-<down>" (lambda () (interactive) (window-resize nil 1)))
(bind-key* "s-<right>" (lambda () (interactive) (window-resize nil 1 t)))
(bind-key* "s-<left>" (lambda () (interactive) (window-resize nil -1 t)))
#+end_src

* Emacsã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç´ æ—©ãé–‹ã

Emacsã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯é–‹ãå›æ•°ãŒå¤šã„ãŸã‚ç´ æ—©ãé–‹ã‘ã‚‹ã‚ˆã†ã«ç‹¬è‡ªã«é–¢æ•°ã‚’å®šç¾©ã—ã¦ã‚­ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚

#+begin_src emacs-lisp
(defun open-emacs-init-file ()
  (interactive)
  (expand-file-name "~/.emacs.d/README.org"))

(bind-key* "s-2" #'open-emacs-init-file)
#+end_src

* è¿½åŠ ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¨­å®š

#+begin_src emacs-lisp
(require 'org-agenda)

(bind-key* "C-M-i" #'company-complete)
;; (bind-key* "C-c C-c M-x" #'execute-extended-command)
(bind-key* "C-t C-c" #'vterm-command)
(bind-key* "C-t C-o" #'macos-app)
(bind-key* "C-t C-t" #'other-frame)
(bind-key* "C-t C-w" #'editor-create-buffer)
(bind-key* "C-x C-v" #'magit-status)
(bind-key* "M-X" #'smex-major-mode-commands)
(bind-key* "M-i" #'edit-indirect-region)
(bind-key* "M-x" #'smex)
(bind-key* "s-1" #'org-agenda-list)
(bind-key* "s-t" #'make-frame)
#+end_src

* ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã®èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã¸ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹

Emacsã«ã¯æ¨™æº–ã§ã„ãã¤ã‹ã®ãƒ‡ãƒãƒƒã‚¬ãƒ¼ãŒä»˜å±ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œãã‚Œã®ãƒ„ãƒ¼
ãƒ«ã®åå‰ãŒãã®ã¾ã¾ä»˜ã„ã¦ã„ã¾ã™ã€‚ =M-x debug-on-XXXX= ã§å…¨ã¦ã®ãƒ‡ãƒãƒƒã‚¬ãƒ¼
ã‚’èµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(defalias 'debug-on-c 'gdb)
(defalias 'debug-on-java 'jdb)
(defalias 'debug-on-perl 'perldb)
(defalias 'debug-on-python 'pdb)
;; dbx
;; sdb
#+end_src

* å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã‚„ãã®ä»–ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

#+begin_src emacs-lisp
(add-to-list 'exec-path "/usr/local/bin")
(add-to-list 'exec-path "/usr/local/opt/openjdk/bin")
(add-to-list 'exec-path "/usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/bin")
(add-to-list 'exec-path "/usr/local/texlive/2021/bin/universal-darwin")  ;; TexLive
(add-to-list 'exec-path (expand-file-name "~/.cargo/bin"))
(add-to-list 'exec-path (expand-file-name "~/.emacs.d/whalebrew"))
(add-to-list 'exec-path (expand-file-name "~/.goenv/bin"))
(add-to-list 'exec-path (expand-file-name "~/.goenv/shims"))
(add-to-list 'exec-path (expand-file-name "~/.local/bin"))
(add-to-list 'exec-path (expand-file-name "~/.nvm/versions/node/v8.15.0/bin"))
(add-to-list 'exec-path (expand-file-name "~/.poetry/bin"))
(add-to-list 'exec-path (expand-file-name "~/.whalebrew-bin/bin"))
(add-to-list 'exec-path (expand-file-name "~/.whalebrew-bin/bin"))
(add-to-list 'exec-path (expand-file-name "~/Library/Android/sdk/platform-tools"))
(add-to-list 'exec-path (expand-file-name "~/Library/Python/.bin"))
(add-to-list 'exec-path (expand-file-name "~/development/flutter/bin"))
(add-to-list 'exec-path (expand-file-name "~/google-cloud-sdk/bin"))
(add-to-list 'exec-path "/opt/ng/symdon/whalebrew")

(setenv "CPPFLAGS" (string-join '("-I/usr/local/opt/openjdk/include")))
(setenv "LDFLAGS" (string-join '("-L/usr/local/Cellar/openssl@1.1/1.1.1l/lib")))
#+end_src

* CSS

CSSç·¨é›†ã®ãŸã‚ã®ã‚¿ãƒ–å¹…ãªã©ã‚’è¨­å®šã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'css-mode)

(setq css-indent-offset 2)
#+end_src

* [[https://github.com/TakesxiSximada/emacs.d/blob/main/prettier/prettier-buffer.el][prettier-buffer.el]]

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã¨ã—ã¦[[https://github.com/prettier/prettier][prettier]]ã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚å…¬å¼
ã®æ‹¡å¼µã§ã‚ã‚‹[[https://github.com/prettier/prettier-emacs][Prettier-js for Emacs]]ã‚‚ã‚ã‚Šã¾ã™ãŒã€ä½¿ç”¨æ„ŸãŒåˆã‚ãªã‹ã£ãŸã®
ã§å¿…è¦ãªæ©Ÿèƒ½ã ã‘ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ç‹¬ç«‹ã•ã›ã‚‹ã»ã©ã§ã‚‚ãªã‹ã£ãŸãŸã‚ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã® =prettier= ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¾ã—ãŸã€‚
ãã®ãŸã‚load-pathã‚’è¿½åŠ ã—ã€ =prettier-buffer= ã‚’requireã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(add-to-list 'load-path (expand-file-name "~/.emacs.d/prettier"))

(require 'prettier-buffer)
#+end_src

å®Ÿè¡Œã¯ =M-x prettier-buffer= ã§å®Ÿè¡Œã§ãã¾ã™ã€‚

* wakatime

ä½œæ¥­æ™‚é–“è¨ˆæ¸¬ã®ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹[[https://wakatime.com/dashboard][wakatime]]ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚wakatimeã«ã¯å…¬å¼ã®Emacsæ‹¡å¼µãŒã‚ã‚Šã¾ã™ã€‚

- [[https://wakatime.com/emacs]]
- [[https://melpa.org/#/getting-started]]
- [[https://github.com/wakatime/wakatime-mode]]

å…¬å¼ã®Emacsæ‹¡å¼µã¯Pythonè£½ã®wakatimeã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹å®Ÿè£…ã¨ãªã£ã¦ã„ã¾ã—ãŸã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å€¤ã¯org-clock-inã—ã¦ã„ã‚‹org-todoã®å±æ€§ã‹ã‚‰å–
å¾—ã—è¨­å®šã—ãŸã‹ã£ãŸãŸã‚ã€Pythonè£½ã®wakatimeã‚³ãƒãƒ³ãƒ‰ã¨å…¬å¼wakatime-modeã‚’ä½¿ã£
ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’èª¿æ•´ã—ãã‚Œã‚‰ã‚’å®Ÿç¾ã™ã‚‹ã‚ˆã‚Šã‚‚Emacsã‹ã‚‰åˆ¶å¾¡ã—ãŸã»ã†ãŒè¦‹é€šã—
ãŒã‚ˆããªã‚‹ã¨è€ƒãˆè‡ªå‰ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ç‹¬ç«‹ã•ã›ã‚‹ã»ã©ã§ã‚‚ãªã‹ã£ãŸãŸã‚ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã® =wakatime= ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¾ã—ãŸã€‚
ãã®ãŸã‚load-pathã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#+begin_src emacs-lisp
(add-to-list 'load-path (expand-file-name "~/.emacs.d/wakatime"))
#+end_src

** [[https://github.com/TakesxiSximada/emacs.d/blob/main/wakatime/wakatime-record.el][wakatime-record.el]]

wakatime-record.elã¯è¨ˆæ¸¬ã—ãŸçµæœã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚
wakatimeã¸ã®ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡ã¯è¡Œã‚ãªã„ã€‚ =(wakatime-record-tunrn-on)= ã™ã‚‹
ã“ã¨ã§æœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'wakatime-record)

(wakatime-record-tunrn-on)
#+end_src

** [[https://github.com/TakesxiSximada/emacs.d/blob/main/wakatime/wakatime-transport.el][wakatime-transport.el]]

wakatime-transport.elã¯wakatime-record.elãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’wakatimeã¸é€ä¿¡ã—ã¾ã™ã€‚
=(wakatime-transport-turn-on))= ã™ã‚‹ã“ã¨ã§æœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'wakatime-transport)

(wakatime-transport-turn-on)
#+end_src

** [[https://github.com/TakesxiSximada/emacs.d/blob/main/wakatime/org-wakatime.el][org-wakatime.el]]

org-modeã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«wakatimeã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ç™»éŒ²ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚
=wakatime-record-get-category= é–¢æ•°ã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã§org-modeã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å–å¾—ã‚’è©¦ã¿ã¾ã™ã€‚
è¨­å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’æ¨æ¸¬ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'org-wakatime)

(defun wakatime-record-get-category ()
  (interactive)
  (or (org-wakatime-get-category)
      (wakatime-record-get-category-by-major-mode)))
#+end_src

* org-src

ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚„è¦‹æ „ãˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-src-fontify-natively t
    org-src-window-setup 'current-window
    org-src-strip-leading-and-trailing-blank-lines t
    org-src-preserve-indentation t
    org-src-tab-acts-natively nil)
#+end_src

* org-agenda

ã‚¿ã‚¹ã‚¯ã®ç®¡ç†ã« =org-agenda= ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
agendaãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ =org-agenda-files= ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ä»Šã™ã¹ãã‚¿ã‚¹ã‚¯ã«é›†ä¸­ã™ã‚‹ãŸã‚æ¦‚è¦ã§ã¯ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã®ã¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-agenda-span 'day)
#+end_src

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã¯ã‚¿ã‚¹ã‚¯ã®è¦‹ç©ã‚‚ã‚Šæ™‚é–“ã¨æ‰€è¦æ™‚é–“ãŒè¡¨ç¤ºã•ã‚Œ
ã¦ã„ãªã„ãŸã‚ã‚¿ã‚¹ã‚¯ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’åˆ¤æ–­ã§ãã¾ã›ã‚“ã€‚ãã“ã§è¦‹ç©ã‚‚ã‚Šæ™‚é–“ã¨æ‰€
è¦æ™‚é–“ã‚’é›†è¨ˆã™ã‚‹é–¢æ•°ã‚’è¿½åŠ ã—ãã‚Œã‚’ç”¨ã„ã¦ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã«è¡¨ç¤ºã™ã‚‹ã‚ˆã†
ã«å¤‰æ›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'org)
(require 'org-clock)

(defun org-clock-get-item-content ()
  (save-excursion
    (let ((start-point (progn (org-back-to-heading t)
			      (point)))
	  (end-point (progn (org-end-of-subtree t t)
			    (point))))
      (buffer-substring-no-properties start-point end-point))))


(defun org-clock-sum-current-item-custom ()
  (interactive)
  (condition-case err-var
      (let* ((content (org-clock-get-item-content))
	     (minute (with-temp-buffer (insert content)
				       (org-clock-sum-current-item))))
	(if (> minute 0)
	    minute
	  ""))
    (error "-")))
#+end_src

ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã§ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã ã‘ã§ã¯ã‚¿ã‚¹ã‚¯ã®å†…å®¹ã‚’æ¨æ¸¬ã—ã«ãã„ãŸ
ã‚è¦ªã®ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚‚è¡¨ç¤ºã—ã¾ã™ã€‚ =%-10.20b= ãªã©ã®è¡¨ç¤ºã‚’å…¥ã‚Œã‚‹ã“ã¨
ã§è¦ªã‚¿ã‚¹ã‚¯ã‚‚è¡¨ç¤ºã§ãã¾ã™ã€‚

ã“ã“ã¾ã§ç”¨äº‹ã—ãŸæ©Ÿèƒ½ã‚’ç”¨ã„ã¦ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã®è¡¨ç¤ºã‚’å¤‰æ›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-agenda-prefix-format
      '((agenda . "%4(org-clock-sum-current-item-custom) %4e %t %.8s %-5.5c %-25.50b ")
        (todo . " %i %-12:c %-6e")
        (tags . " %i %-12:c")
        (search . " %i %-12:c")))
#+end_src

ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã«ã‚¿ã‚¹ã‚¯ãŒå›ºã¾ã‚‹ã‚ˆã†ã«ã‚½ãƒ¼ãƒˆæˆ¦ç•¥ã‚’è¨­å®šã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-agenda-sorting-strategy
    '((agenda habit-down time-up category-keep effort-up category-keep priority-down)
      (todo   priority-down category-keep)
      (tags   priority-down category-keep)
      (search category-keep)))
#+end_src

** ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¡¨ç¤ºã™ã‚‹

#+begin_src emacs-lisp
(use-package org-agenda-property :ensure t :defer t)
#+end_src

å‚è€ƒ: [[https://blog.symdon.info/posts/1617669052/][org-agendaã®day viewã§locationã®è¡¨ç¤ºã‚’è¡Œã†]]

* org-todo

org-todoã®è«–ç†æ§‹é€ ã‚’å¼·åˆ¶ã—ã¾ã™ã€‚
ä¾å­˜ã—ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãã‚Œã‚‰ã‚’å®Œäº†ã—ã¦ã„ãªã„ã¨æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«é€²ã‚ã¾ã›ã‚“ã€‚

#+begin_src emacs-lisp
(setq org-enforce-todo-dependencies t)
#+end_src

ãŸã ã—ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯ç¾åœ¨é€²è¡Œä¸­ã®ã‚¿ã‚¹ã‚¯ã‚’é˜»å®³ã—ã¦ã—ã¾ã†ã®ã§ç„¡åŠ¹ã«ã—ã¾ã™ã€‚
æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ =org-enforce-todo-checkbox-dependencies= ã‚’ç”¨ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-enforce-todo-checkbox-dependencies nil)
#+end_src

org-todoã®è«–ç†æ§‹é€ ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã—ã¾ã™ã€‚
ã¾ã å®Ÿè¡Œã®æ¡ä»¶ã‚’æº€ãŸã•ãªã„org-todoã¯org-agendaã§ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆè¡¨ç¤ºã«ãªã‚Šã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-track-ordered-property-with-tag t)
#+end_src

org-todoã«ã¯TODOã¨DONEã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚
ã“ã‚Œã§ã¯çŠ¶æ…‹ã®ä¿æŒã«ã¯å°‘ã—è¶³ã‚Šãªã„ãŒã€å¤šã™ãã‚‹ã®ã‚‚æ“ä½œæ€§ã‚’è½ã™ã“ã¨ã«ãªã‚‹ã€‚
è¨­å®šã—ãŸã‘ã‚Œã©ã‚„ã‚‰ãªã‹ã£ãŸã¨ã„ã†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ã—ã¦CANCELã‚’è¿½åŠ ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(setq org-todo-keywords
  '((sequence "TODO"  "|" "DONE" "CANCEL")))
#+end_src

* org-priority

org-modeã®ã‚¿ã‚¹ã‚¯ã®å„ªå…ˆåº¦ã‚’è¨­å®šã—ã¾ã™ã€‚

å„ªå…ˆåº¦ã¨ã—ã¦A=Zã®æ–‡å­—ã‚’ä½¿ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-priority-lowest ?Z)
#+end_src

org-modeåŠã³org-agenda-modeã§ã¯ãã‚Œãã‚Œ =M-n= =M-p= ã‚’ç”¨ã„ã¦å„ªå…ˆåº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(define-key org-mode-map (kbd "M-p") 'org-priority-up)
(define-key org-mode-map (kbd "M-n") 'org-priority-down)
(define-key org-agenda-mode-map (kbd "M-p") 'org-agenda-priority-up)
(define-key org-agenda-mode-map (kbd "M-n") 'org-agenda-priority-down)
#+end_src

* org-babel

org-babelã¯org-modeã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

#+begin_src emacs-lisp
(org-babel-do-load-languages
 'org-babel-load-languages
 '(
   (ditaa . t)
   (scheme . t)
   (emacs-lisp . t)
   (python . t)
   (restclient . t)
   (shell . t)
   (sql . t)))
#+end_src


* Databases

å„ç¨®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶šè¨­å®šã‚’ã—ã¾ã™ã€‚

** MySQL

#+begin_src emacs-lisp
(setq sql-mysql-program "docker")
(setq sql-mysql-options '("exec" "-ti" "mysqld" "mysql" "mysql"))
(setq sql-mysql-login-params nil)
#+end_src

MySQLã®ã‚³ãƒ³ãƒ†ãƒŠã¯SIGINTã‚’é€ä¿¡(C-c C-c)ã—ãŸã¨ãã«åœæ­¢ã—ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Š
ã¾ã™ã€‚ãã®ãŸã‚åœæ­¢ç”¨ã«Dockerã§å‹•ä½œã•ã›ã¦ã„ã‚‹mysqldã«å¯¾ã—ã¦SIGTERMã‚’é€
ä¿¡ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(defun sql-mysqld-stop ()
  (interactive)
  (let ((vterm-shell "docker kill -s TERM mysqld")
	(vterm-buffer-name "SQL: MySQL: Stop"))
    (vterm)))
#+end_src

** PostgreSQL

#+begin_src emacs-lisp
(setq sql-postgres-program "docker")
(setq sql-postgres-options '("exec" "-ti" "postgres" "psql" "-U" "postgres"))
(setq sql-postgres-login-params nil)
#+end_src

** IBM DB2

ç§ã¯localã§ä½¿ã†DB2ã®ç’°å¢ƒã‚’Dockerã‚’ç”¨ã„ã¦æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚
ãã®ãŸã‚DB2ã‚µãƒ¼ãƒã¸ã®æ¥ç¶šã¯ã‚³ãƒ³ãƒ†ãƒŠã«ç›´æ¥å…¥ã‚‹æ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

sql-db2-programã¨sql-db2-optionsã‚’è¨­å®šã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq sql-db2-program "docker")
(setq sql-db2-options '("exec" "-ti" "db2-server" "bash" "-c" "su - db2inst1 -c 'db2 -t'"))
#+end_src

DB2ã¯æ”¹è¡Œã§SQLã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ãã®å ´åˆè¤‡æ•°è¡Œã«ã¾ãŸãŒã‚‹SQLã¯æ”¹è¡Œã‚’å‰Šé™¤ã—ã¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
=-t= ã‚’æŒ‡å®šã™ã‚‹ã¨æ”¹è¡Œã§ã¯ãªãã‚»ãƒŸã‚³ãƒ­ãƒ³(;)ã§SQLã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

æ¥ç¶šã™ã‚‹å‰ã«ã¯å¿…ãšDB2ã‚µãƒ¼ãƒã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
èµ·å‹•ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯whalebrewãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚Šã¾ã™ã€‚
[[https://github.com/TakesxiSximada/emacs.d/blob/main/whalebrew/db2-server]]

** Microsonft SQL Server

MSSQL Serverã«ã¤ã„ã¦ã¯sql-modeã§ã®æ‰±ã„ãŒé›£ã—ã„ã§ã™ã€‚
[[https://www.emacswiki.org/emacs/SqlMode#h5o-8]]

ãã“ã§DockerçµŒç”±ã§æ¥ç¶šã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ¥é€”ç”¨æ„ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(defun sql-docker-ms ()
  (interactive)
  (let ((vterm-shell "docker exec -ti mssql bash -c '/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P ${SA_PASSWORD}'")
	(vterm-buffer-name "SQL: Docker: Microsoft MSSQL Server")
	(vterm-kill-buffer-on-exit nil))
  (vterm)))
#+end_src

** Microsoft SQL Server

#+begin_src emacs-lisp
(setq sql-ms-program "docker")
(setq sql-ms-options '("exec" "-ti" "mssql" "/opt/mssql-tools/bin/sqlcmd"))
(setq sql-ms-login-params '(user server))
#+end_src
" "-S" "localhost" "-U" "SA" "-P" "Testing1234!
(setq sql-server "localhost")
(setq sql-user "SA")
(setq sql-password "Testing1234!")


** Oracle

#+begin_src emacs-lisp
(setq sql-oracle-program "docker")
(setq sql-oracle-options '("exec" "-ti" "oracle" "bash" "-c" "sqlplus sys/testing1234@localhost:1521/ORCLCDB as sysdba"))
(setq sql-oracle-login-params nil)
#+end_src

* ç’°å¢ƒå›ºæœ‰ã®è¨­å®š

ç’°å¢ƒå›ºæœ‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

#+begin_src emacs-lisp
(load-file "/opt/ng/symdon/emacs.d/after.el")
#+end_src

* ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

ã“ã“ã§ã¯å¿…è¦ã«å¿œã˜ã¦å®šç¾©ã—ãŸæ§˜ã€…ãªç›®çš„ã®é–¢æ•°ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

** ãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹

ã‚«ãƒ¬ãƒ³ãƒˆãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®ã‚³ãƒ”ãƒ¼ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(defun our-buffer-copy-current-file-path ()
  "ãƒãƒƒãƒ•ã‚¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹"
  (interactive)
  (let ((path (buffer-file-name)))
    (if path
  	(progn
         (kill-new path)
         (message (format "Copied: %s" path)))
      (message (format "Cannot copied")))))
#+end_src

** face

ç¾åœ¨ã®ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®faceåã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(defun what-face (pos)
  "Display current position face name."
  (interactive "d")
  (if-let ((face-name (get-text-property pos 'face)))
      (message "Face: %s" face-name)))
#+end_src

* AsciiDoc

AsciiDocã¯ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã®ãŸã‚è¨˜æ³•(Nortation)ã®ä¸€ã¤ã§ã™ã€‚
AsciiDocã‚’Emacsã§è¡¨ç¤ºã—ãŸã‚Šç·¨é›†ã™ã‚‹å ´åˆæ§˜ã€…ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

** adoc-mode

adoc-modeã¯Emacsä¸Šã§AsciiDocå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ãŸã‚ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚
ã—ã‹ã—ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚„ãƒ¡ã‚¿æƒ…å ±ã®è¡¨ç¤ºã‚µã‚¤ã‚ºãŒã¨ã¦ã‚‚å°ã•ããªã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã§ã¯ç·¨é›†æ™‚ã«èª­ã‚ãªã„ã®ã§ã€ã¡ã‚‡ã†ã©ã‚ˆã„å€¤ã«è¨­å®šã—ç›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(use-package adoc-mode :ensure t :defer t
  :config
  (set-face-attribute markup-comment-face nil :width 'normal :height 1)
  (set-face-attribute markup-meta-face nil :width 'normal :height 1 :foreground "red")
  )
#+end_src

* Font

ãƒ•ã‚©ãƒ³ãƒˆã¯Source Han Mono[fn:source-han-mono-repo]ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

ãƒ•ã‚©ãƒ³ãƒˆã‚’èª¿ç¯€ã—ã¦æ–‡å­—å¹…ãŒåˆã†ã‚ˆã†ã«ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(progn
  (set-face-attribute 'default nil :family "æºãƒç­‰å¹…" :height 120)
  (set-fontset-font nil 'japanese-jisx0208 (font-spec :family "æºãƒç­‰å¹…" :size 16))
  (set-fontset-font nil 'japanese-jisx0208-1978 (font-spec :family "æºãƒç­‰å¹…" :size 16))
  (set-fontset-font nil 'japanese-jisx0212 (font-spec :family "æºãƒç­‰å¹…" :size 16))
  (set-fontset-font nil 'japanese-jisx0213.2004-1 (font-spec :family "æºãƒç­‰å¹…" :size 16))
  (set-fontset-font nil 'jisx0201 (font-spec :family "æºãƒç­‰å¹…" :size 12))
  (set-fontset-font nil 'symbol (font-spec :family "Apple Color Emoji" :size 12))
  (set-fontset-font nil '(?â˜º . ?â˜º) (font-spec :family "Apple Color Emoji" :size 6))
  (set-fontset-font nil '(?ğŸ€„ . ?ğŸ€ˆ) (font-spec :family "Apple Color Emoji" :size 9))
  (set-fontset-font nil '(?ä¸€ . ?ä¸€) (font-spec :family "æºãƒç­‰å¹…" :size 12))
  )
#+end_src

| é¡ä¼¼æ–‡å­— |
|----------|
| l I 1    |
| o O 0    |
| q 9      |
| s S 5    |
| x X      |
| z Z 2    |
| ä¸€ â€•     |


| ãšã‚Œç¢ºèªç”¨ åŠè§’40å­—ã€å…¨è§’20å­—            |                    |
|------------------------------------------+--------------------|
| AIfUEaiueoAIUEOaiueoAIUEOaiueoAIUEOaiueo | ASCIIè‹±å­—          |
| 0123456789012345678901234567890123456789 | ASCIIæ•°å­—          |
| ï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µ | JIS X 0201ï½¶ï¾…       |
| ã‚ã„ã†ãˆãŠã‚ã„ã†ãˆãŠã‚ã„ã†ãˆãŠã‚ã„ã†ãˆãŠ | JIS X 0208ã²ã‚‰ãŒãª |
| ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚¢ã‚¤ã‚¦ã‚¨ã‚ª | åŒã‚«ã‚¿ã‚«ãƒŠ         |
| ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ | åŒè‹±å­—             |
| äºœå”–å¨ƒé˜¿å“€äºœå”–å¨ƒé˜¿å“€äºœå”–å¨ƒé˜¿å“€äºœå”–å¨ƒé˜¿å“€ | åŒæ¼¢å­—             |
| ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ | JIS X 0213æ¼¢å­—     |
| ğŸ˜ƒğŸ˜‡ğŸ˜ğŸ˜œğŸ˜¸ğŸ™ˆğŸºğŸ°ğŸ‘½ğŸ‰ğŸ’°ğŸ¡ğŸ…ğŸªğŸ•ğŸš€ğŸš»ğŸ’©ğŸ“·ğŸ“¦ | çµµæ–‡å­—             |
| â˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜º                       | çµµæ–‡å­—             |
| ğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆ                 | çµµæ–‡å­—             |


(ã“ã®æ–‡å­—åˆ—ã¯ https://qiita.com/query1000/items/4b0b8db872adc1a5e2e9V ã‹ã‚‰æŠœç²‹)

* [[https://github.com/Fanael/edit-indirect][edit-indirect]]

ãƒãƒƒãƒ•ã‚¡ã®ä¸€éƒ¨ã®é ˜åŸŸã‚’åˆ¥ã®ãƒãƒƒãƒ•ã‚¡ã«ç§»ã—ã¦ç·¨é›†ã™ã‚‹æ©Ÿèƒ½ã‚’edit-indirect
ã‚’ç”¨ã„ã¦å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚edit-indirectã§ã¯ =C-c C-c= ã«
=edit-indirect-commit= ãŒãƒã‚¤ãƒ³ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€Org-modeãªã©ã® =C-c
C-c= ã‚’æ—¢ã«ä½¿ã£ã¦ã„ã‚‹ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆãã®è¨­å®šãŒé‚ªé­”ã«ãªã‚‹ã®ã§ç„¡åŠ¹
åŒ–ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'edit-indirect)

(define-key edit-indirect-mode-map (kbd "C-c C-c") nil)
#+end_src

* ã‚¿ã‚¹ã‚¯

ã‚¿ã‚¹ã‚¯å®Ÿè¡Œæ™‚ã®é›†ä¸­åŠ›ã®é˜»å®³ã‚’æœ€å°é™ã«ã™ã‚‹ãŸã‚ã«ã€é–¢é€£ã™ã‚‹æƒ…å ±ä»¥å¤–ã‚’è¦‹ãˆ
ãªã„ã‚ˆã†ã«ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã—ã¾ã™ã€‚é–‹å§‹æ™‚ã« =task-join= ã€çµ‚äº†æ™‚ã«
=task-leave= ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'edit-indirect)
(require 'org-clock)


(defun task-join ()
  "Join the task."
  (interactive)
  (org-narrow-to-subtree)
  (mark-whole-buffer)
  (switch-to-buffer
   (edit-indirect-region
    (region-beginning)
    (region-end)))
  (org-clock-in)
  )

(defun task-leave ()
  "Leave the clock-in task."
  (interactive)
  (if-let ((clock-buf (org-clock-is-active)))
      (with-current-buffer clock-buf
	(org-clock-out)))
  (edit-indirect-commit)
  (widen))
#+end_src

* N

#+begin_src emacs-lisp
(setenv "N_PREFIX" (expand-file-name "~/.local"))
(add-to-list 'exec-path (expand-file-name "~/.local/bin"))
#+end_src

* grip-mode

Org-modeã‚„Markdownã®ç·¨é›†æ™‚ã«ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚‹ã¨éå¸¸ã«æ—ã‚‹ã€‚
Emacsã§ã¯grip-modeã‚’ä½¿ã†ã“ã¨ã§å®Ÿç¾ã§ãã‚‹ã€‚

#+begin_src  emacs-lisp
(use-package grip-mode :ensure t :defer t)
#+end_src

grip-modeã¯å†…éƒ¨ã§Gripã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚ã“ã®GripãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤
ãƒ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã€‚Gripã¯Pythonã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€
pipã‚’ç”¨ã„ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

#+begin_src bash
pip install grip
#+end_src

å‚è€ƒ :: [[https://blog.symdon.info/posts/1638063555/]]

* org-export

org-exportã¯org-mdoeã§è¨˜è¿°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥ã®å½¢å¼ã«å¤‰æ›ã™ã‚‹ã€‚

ä¸Šä»˜ãæ–‡å­—(^ã§æŒŸã‚€)ã¨ä¸‹ä»˜ãæ–‡å­—ã®è¨˜æ³•(_ã§æŒŸã‚€)ã¯é€šå¸¸ã®è¨˜è¿°ã§ä½¿ç”¨ã™ã‚‹ãŸ
ã‚ã€æ›´ã«{}ã®æŒ‡å®šãŒå¿…è¦ã«ãªã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚

#+begin_src emacs-lisp
(setq org-export-with-sub-superscripts '{})
#+end_src

å‚è€ƒ :: [[https://blog.symdon.info/posts/1605311844/]]

** Orgãƒ•ã‚¡ã‚¤ãƒ«ã‚’PDFã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

LaTeXã‚’ä½¿ã£ã¦Orgãƒ•ã‚¡ã‚¤ãƒ«ã‚’PDFã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã€‚
org-latex-export-to-pdfãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒã€æ–‡å­—ã‚³ãƒ¼ãƒ‰é–¢é€£ã§å‹•ä½œã—ãªã‹ã£ãŸãŸã‚ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥èµ·å‹•ã™ã‚‹å½¢ã§ç‹¬è‡ªã«å®Ÿè£…ã—ãŸã€‚

#+begin_src emacs-lisp
(defun org-pdf-export-to-pdf-via-latex ()
  "Export PDF file from org file via latex"
  (interactive)
  (let* ((tex-file-name (org-latex-export-to-latex))
	 (base-file-name (file-name-base tex-file-name))
	 (dvi-file-name (format "%s.dvi" base-file-name))
	 (pdf-file-name (format "%s.pdf" base-file-name))
	 (vterm-shell (format "bash -c 'platex %s && dvipdfmx %s'"
			      tex-file-name
			      dvi-file-name))
	 (vterm-buffer-name (format "*Org PDF Exporting: %s" pdf-file-name))
	 (vterm-kill-buffer-on-exit nil))
    (vterm)
    pdf-file-name))
#+end_src

* aspell

ã‚¹ãƒšãƒ«ãƒã‚§ãƒƒã‚«ãƒ¼ã€‚

http://aspell.net/

#+begin_src emacs-lisp
(setq-default ispell-program-name "aspell")
(with-eval-after-load "ispell"
  (setq ispell-local-dictionary "en_US")
  (add-to-list 'ispell-skip-region-alist '("[^\000-\377]+")))
#+end_src

aspellè‡ªä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ Homebrewã®å ´åˆ =brew install aspell= ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

* AquaSKK

IMEã«ã¯AquaSKKã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚aquaskk/keymap.conf ã‚’ =~/Library/Application Support/AquaSKK/= é…ä¸‹ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚

* mmm-mode

mmm-modeã¯1ã¤ã®ãƒãƒƒãƒ•ã‚¡å†…ã§è¤‡æ•°ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
ãŸã ã—ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.5.8ã«ã¯vue-modeã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹æ—¢çŸ¥ã®ãƒã‚°[fn:mmm-mode-issue-112]ãŒã‚ã‚‹ã€‚
ã“ã®å•é¡Œã‚’å›é¿ã™ã‚‹ã«ã¯ã„ãã¤ã‹æ–¹æ³•ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ãŒç¢ºèªã—ãŸã¨ã“ã‚ä»¥ä¸‹ã®é–¢æ•°ã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã§å›é¿ã§ããŸ[fn:mmm-mode-issue-112-wa]ã€‚

#+begin_src emacs-lisp
(require 'mmm-region)


(defun mmm-syntax-propertize-function (start stop)
  "Composite function that applies `syntax-table' text properties.
It iterates over all submode regions between START and STOP and
calls each respective submode's `syntax-propertize-function'."
  (let ((saved-mode mmm-current-submode)
        (saved-ovl  mmm-current-overlay))
    (mmm-save-changed-local-variables
     mmm-current-submode mmm-current-overlay)
    (unwind-protect
        (mapc (lambda (elt)
                (let* ((mode (car elt))
                       (func (get mode 'mmm-syntax-propertize-function))
                       (beg (cadr elt)) (end (nth 2 elt))
                       (ovl (nth 3 elt))
                       ;; FIXME: Messing with syntax-ppss-* vars should not
                       ;; be needed any more in Emacsâ‰¥26.
                       syntax-ppss-cache
                       syntax-ppss-last)
                  (goto-char beg)
                  (mmm-set-current-pair mode ovl)
                  (mmm-set-local-variables mode mmm-current-overlay)
                  (save-restriction
                    (when mmm-current-overlay
                      (narrow-to-region (overlay-start mmm-current-overlay)
                                        (overlay-end mmm-current-overlay))
                      (put-text-property
                       (point-min) (point-max)
                       'syntax-table (syntax-table)))
                    (cond
                     (func
                      (funcall func beg end))
                     (font-lock-syntactic-keywords
                      (let ((syntax-propertize-function nil))
                        (font-lock-fontify-syntactic-keywords-region beg end))))
                    (run-hook-with-args 'mmm-after-syntax-propertize-functions
                                        mmm-current-overlay mode beg end))))
              (mmm-regions-in start stop))
      (mmm-set-current-pair saved-mode saved-ovl)
      (mmm-set-local-variables (or saved-mode mmm-primary-mode) saved-ovl))))
#+end_src

* ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®æ–‡å­—åˆ—ã‚’ç½®ãæ›ãˆã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

=replace-region-contents= ã‚’ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã—ã€é©å¿œã™ã‚‹æ–‡å­—åˆ—å‡¦ç†ã‚’ä»»æ„ã«æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸã€‚

#+begin_src emacs-lisp
(defun apply-and-replace-region-string (func beg end)
  "Replace after appling function the region string"
  (interactive "a\nr")
  (replace-region-contents
   beg end (lambda ()
	     (let ((txt (buffer-substring-no-properties beg end)))
	       (funcall func txt)))))
#+end_src

ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®æµ®å‹•å°æ•°ç‚¹å½¢å¼ã®UNIXã‚¨ãƒãƒƒã‚¯ã‚¿ã‚¤ãƒ ã‚’æ™‚åˆ»å½¢å¼ã«å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã—ãŸã€‚

#+begin_src emacs-lisp
(defun float-time-to-datetime-string (float-style-string)
  "Convert unix epoc time (floating point style) string to date time formated string."
  (format-time-string
   "%Y-%m-%dT%H:%M:%S.%6N"
   (encode-time (decode-time
		 (string-to-number float-style-string)))))
#+end_src

* EditorConfig

EditorConfigã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®ã‚¨ãƒ‡ã‚£ã‚¿ã®è¨­å®šã‚’çµ±ä¸€ã™ã‚‹ã€‚


#+begin_src emacs-lisp
(use-package editorconfig
  :ensure t
  :config
  (editorconfig-mode 1))
#+end_src


* è„šæ³¨

[fn:source-han-mono-repo] https://github.com/adobe-fonts/source-han-mono
[fn:mmm-mode-issue-112] [[https://github.com/purcell/mmm-mode/issues/112]]
[fn:mmm-mode-issue-112-wa] [[https://github.com/purcell/mmm-mode/issues/112#issuecomment-751926650]]
