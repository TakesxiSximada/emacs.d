#+TITLE: My Emacs configurations.

[[https://res.cloudinary.com/symdon/image/upload/v1645157040/demo_spyojf.gif]]

This repository is settings for my Emacs.

|------------------+-----------------------------------------------+
| File             |                                               |
|------------------+-----------------------------------------------+
| ./init.el        | Remember, the Force will be with you, always. |
| ./themes/        | Theme files.                                  |
| ./distributions/ | Put submodules of Emacs distributions.        |
| ./spacemacs.d/   | Settings for spacemacs.                       |
| ./doom.d         | Settings for Doom Emacs.                      |
|------------------+-----------------------------------------------+

* Setup

#+begin_example
git clone git@github.com:TakesxiSximada/emacs.d.git ~/.emacs.d
#+end_example

* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+begin_src emacs-lisp
(unless (package-installed-p 'use-package)
  (package-install 'use-package))
(require 'use-package)

(use-package quelpa :ensure t :defer t)
(use-package quelpa-use-package :ensure t :defer t)
#+end_src

package-selected-packagesã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¨ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(defun refresh-installed-all-packaes ()
  (interactive)
  (mapcar (lambda (pkg-symbol)
	    (if (not (package-installed-p pkg-symbol))
		(progn
		  (message (format "Installing.... %s" pkg-symbol))
		  (package-install pkg-symbol))
	      (message (format "Already installed: %s" pkg-symbol))))
	  package-selected-packages))
#+end_src

** å€‹äººç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+begin_src emacs-lisp
(el-get-bundle eglot :type "git" :url "git@github.com:joaotavora/eglot.git")
(el-get-bundle change-case :url "git@github.com:TakesxiSximada/change-case.el.git" :type "git")
(el-get-bundle sudden-death :url "git@github.com:TakesxiSximada/sudden-death.el.git" :type "git")
#+end_src

#+begin_src
(el-get-bundle swift-mode :type "git" :url "git@github.com:swift-emacs/swift-mode.git")
#+end_src

* å„ç¨®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

#+begin_src emacs-lisp
(use-package sgml-mode :ensure t :defer t
  :config
  (setq sgml-quick-keys 'close))
(use-package add-node-modules-path :ensure t :defer t)
(use-package ag :ensure t :defer t :no-require t)
(use-package avy-menu :ensure t :defer t)
(use-package csv-mode :ensure t :defer t)
(use-package db :ensure t :defer t)
(use-package dired-filter :ensure t :defer t)
(use-package fakir :ensure t :defer t)
(use-package flycheck :ensure t :defer t)
(use-package github-review  :ensure t :defer t)
(use-package google-translate :ensure t :defer t)
(use-package mew :ensure t :defer t)
(use-package monky :ensure t :defer t)
(use-package nginx-mode :ensure t :defer t)
(use-package ob-async :ensure t)
(use-package ob-restclient :ensure t :defer t)
(use-package pcre2el :ensure t :defer t)
(use-package request :ensure t :defer t)
(use-package restclient :ensure t :defer t)
(use-package s :ensure t :defer t)
(use-package smex :ensure t :defer t)
(use-package terraform-mode :ensure t :defer t)
(use-package transient :ensure t)
;; (use-package unicode-escape :ensure t :defer t)
(use-package vagrant-tramp :ensure t :defer t)
(use-package web :ensure t :defer t)
(use-package wgrep :ensure t :defer t)
(use-package wgrep-ag :ensure t :defer t)
#+end_src

** IDO

#+begin_src emacs-lisp
(ido-mode 1)
(ido-everywhere 1)
(setq ido-enable-flex-matching t)
(use-package ido-vertical-mode :ensure t :defer
  :init
  (ido-vertical-mode)
  (add-hook 'ido-setup-hook #'ido-vertical-define-keys-custom)
  :custom
  (ido-default-file-method 'selected-window)
  (ido-default-buffer-method 'selected-window))

(defun ido-vertical-define-keys-custom ()
  (define-key ido-completion-map (kbd "M-n") 'ido-next-match)
  (define-key ido-completion-map (kbd "M-p") 'ido-prev-match)
  )

;; WHY DID I USE ido-completing-read+ PACKAGE?:
;;   I changed value t to ido-everywhere, but ido-vertical-mode did
;;   not work. Should be enabled ido-ubiquitous-mode to work it.

(use-package ido-completing-read+ :ensure t :defer t
  :init
  (ido-ubiquitous-mode 1))
#+end_src

** OrgMode

#+begin_src emacs-lisp
(use-package org :ensure t :defer t
  :config
  (org-indent-mode)
  (setq org-startup-indented t
        org-archive-location (format-time-string "ARCHIVE_%Y.org::" (current-time))
        ))

(require 'org-clock)

:; automatic timeout timer
(setq org-clock-automatic-timeout (* 60 10))
(setq org-clock-automatic-timeout-timer
      (run-with-idle-timer org-clock-automatic-timeout
			   t 'org-clock-out))
#+end_src

** company

#+begin_src emacs-lisp
(use-package company :ensure t :pin melpa
  :config
  (global-company-mode)
  (setq
   company-idle-delay 0 ; default = 0.5
   company-minimum-prefix-length 2 ; default = 4
   company-selection-wrap-around t ; å€™è£œã®ä¸€ç•ªä¸‹ã§ã•ã‚‰ã«ä¸‹ã«è¡Œã“ã†ã¨ã™ã‚‹ã¨ä¸€ç•ªä¸Šã«æˆ»ã‚‹
   company-tooltip-idle-delay nil)
  )
#+end_src

** Language Server Protocol (eglot)

#+begin_src emacs-lisp
(use-package eglot :defer t :ensure t
  :init
  (defun eglot-install-language-server-python ()
    (interactive)
    (make-process :name "*EGLOT INSTALL*"
  		  :buffer (get-buffer-create "*EGLOT INSTALL*")
  		  :command `("pip" "install" "python-language-server")))

  :config
  (add-to-list 'eglot-server-programs '(vue-mode . ("vls")))

  (define-key eglot-mode-map (kbd "M-.") 'xref-find-definitions)
  (define-key eglot-mode-map (kbd "M-,") 'pop-tag-mark)

  ;; :if (eq system-type 'darwin)
  ;; :ensure-system-package
  ;; ("vls" . "npm install -g vls")
  )

#+end_src

** edit-indirect

#+begin_src emacs-lisp
(use-package edit-indirect :ensure t :defer t
  :config
  (setq edit-indirect-guess-mode-function #'edit-indirect-custom-apply-major-mode))

(defun edit-indirect-custom-guess-major-mode (_parent-buffer _beg _end)
  "Guess major-mode to parent-buffer major-mode.

Returns symbol of major-mode.
"
  (with-current-buffer _parent-buffer
    (goto-char _beg)

    (if (eq major-mode 'org-mode)
	(if-let ((lang (nth 0 (org-babel-get-src-block-info))))
	    (intern (format "%s-mode" lang))
	  'org-mode)
      major-mode)))

(defun edit-indirect-custom-apply-major-mode  (_parent-buffer _beg _end)
  "Apply major-mode to parent-buffer major-mode."
  (funcall (edit-indirect-custom-guess-major-mode _parent-buffer _beg _end)))
#+end_src

** Javascript and Typescript

#+begin_src emacs-lisp
(use-package typescript-mode :defer t :ensure t
  :config
  (setq typescript-indent-level 2))

(use-package js-mode :defer t
  :config
  (setq js-indent-level 2))
(use-package js2-mode :defer t :ensure t
  :config
  (setq js-indent-level 2))
#+end_src

** Vue

#+begin_src emacs-lisp
(use-package vue-mode :ensure t :defer t
  :requires (vue-mode
	     vue-html-mode
	     css-mode
	     js-mode
	     typescript-mode)
  :config
  (define-key css-mode-map (kbd "C-c i") #'vue-mode-edit-all-indirect)
  (define-key css-mode-map (kbd "M-i") #'vue-mode-edit-indirect-at-point)
  (define-key js-mode-map (kbd "C-c i") #'vue-mode-edit-all-indirect)
  (define-key js-mode-map (kbd "M-i") #'vue-mode-edit-indirect-at-point)
  (define-key typescript-mode-map (kbd "C-c i") #'vue-mode-edit-all-indirect)
  (define-key typescript-mode-map (kbd "M-i") #'vue-mode-edit-indirect-at-point)
  (define-key vue-html-mode-map (kbd "C-c i") #'vue-mode-edit-all-indirect)
  (define-key vue-html-mode-map (kbd "M-i") #'vue-mode-edit-indirect-at-point)
  (define-key vue-mode-map (kbd "C-c i") #'vue-mode-edit-all-indirect)
  (define-key vue-mode-map (kbd "M-i") #'vue-mode-edit-indirect-at-point)

  (defun vue-mode-edit-all-indirect (&optional keep-windows)
    "Open all subsections with `edit-indirect-mode' in seperate windows.
  If KEEP-WINDOWS is set, do not delete other windows and keep the root window
  open."
    (interactive "P")
    (when (not keep-windows)
      (delete-other-windows))
    (save-selected-window
      (split-window-horizontally)
      (dolist (ol (mmm-overlays-contained-in (point-min) (point-max)))
        (let* ((window (split-window-below))
               (mode (or (plist-get vue-dedicated-modes (overlay-get ol 'mmm-mode))
                         (overlay-get ol 'mmm-mode)))
               (buffer (edit-indirect-region (overlay-start ol) (overlay-end ol))))
          (maximize-window)
          (with-current-buffer buffer
            (funcall mode))
          (set-window-buffer window buffer)))
      (balance-windows))
    (when (not keep-windows)
      (delete-window)
      (balance-windows)))
  )
#+end_src

** Python

*** py-isort

isortã¯Pythonã®importé †åºã‚’æ•´åˆ—ã™ã‚‹ã€‚
isortã‚³ãƒãƒ³ãƒ‰ã‚’å¤–éƒ¨ã‹ã‚‰æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãƒ¢ãƒ³ã‚­ãƒ¼ãƒ‘ãƒƒãƒã‚’å½“ã¦ã‚‹ã€‚

#+begin_src emacs-lisp
(autoload 'py-isort-buffer "py-isort")
(autoload 'py-isort-region "py-isort")
(autoload 'py-isort-before-save "py-isort")

(with-eval-after-load 'py-isort
  (defcustom py-isort-executable "isort"
    "Name of the executable to run."
    :type 'string)

  (defun py-isort--call-executable (errbuf file)
    (let ((default-directory (py-isort--find-settings-path)))
      (zerop (apply 'call-process py-isort-executable nil errbuf nil
                    (append `(" " , file, " ",
                              (concat "--settings-path=" default-directory))
                            py-isort-options))))))
#+end_src

* ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®åˆ†å‰²è¡¨ç¤º

Emacsã§ã¯ã€é€šå¸¸ã®OSãªã©ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹é ˜åŸŸã¯ãƒ•ãƒ¬ãƒ¼ãƒ ã¨å‘¼ã³ã€
ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¯Emacsã®ç”»é¢(ãƒ•ãƒ¬ãƒ¼ãƒ )å†…ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹é ˜åŸŸã®ã“ã¨ã‚’æŒ‡ã™ã€‚
ã§ãã‚‹é™ã‚Šæ–‡å­—ã‚’å¤šãè¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®åˆ†å‰²ç·šã®å¹…ã‚’å°ã•ãã™ã‚‹ã€‚
ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤ºã—ãªã„å ´åˆã€ä¸Šä¸‹ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å¢ƒç•ŒãŒã‚ã‹ã‚‰ãªããªã£ã¦
ã—ã¾ã†ã®ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸‹éƒ¨ã«åˆ†å‰²ç·šã‚’è¡¨ç¤ºã™ã‚‹ã€‚

#+begin_src emacs-lisp
(setq window-divider-default-bottom-width 1)
(setq window-divider-default-places 'bottom-only)
#+end_src

è¨­å®šã‚’åæ˜ ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(window-divider-mode)
#+end_src

åŒæ§˜ã®ç†ç”±ã‹ã‚‰ãƒ•ãƒªãƒ³ã‚¸ã‚‚è¡¨ç¤ºã—ãªã„ã€‚

#+begin_src emacs-lisp
(fringe-mode 0)
#+end_src

* ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã®å¤‰æ›´

#+begin_src emacs-lisp
(bind-key* "s-<up>" (lambda () (interactive) (window-resize nil -1)))
(bind-key* "s-<down>" (lambda () (interactive) (window-resize nil 1)))
(bind-key* "s-<right>" (lambda () (interactive) (window-resize nil 1 t)))
(bind-key* "s-<left>" (lambda () (interactive) (window-resize nil -1 t)))
#+end_src

* è¿½åŠ ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¨­å®š

#+begin_src emacs-lisp
(bind-key* "C-M-i" #'company-complete)
;; (bind-key* "C-c C-c M-x" #'execute-extended-command)
(bind-key* "C-t C-c" #'vterm-command)
(bind-key* "C-t C-t" #'other-frame)
(bind-key* "C-x C-v" #'magit-status)
(bind-key* "M-X" #'smex-major-mode-commands)
(bind-key* "M-x" #'smex)
(bind-key* "s-t" #'make-frame)

#+end_src

#+begin_src emacs-lisp
(define-key override-global-map (kbd "C-t C-i") #'org-clock-goto)
#+end_src

* ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã®èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã¸ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹

Emacsã«ã¯æ¨™æº–ã§ã„ãã¤ã‹ã®ãƒ‡ãƒãƒƒã‚¬ãƒ¼ãŒä»˜å±ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œãã‚Œã®ãƒ„ãƒ¼ãƒ«ã®åå‰ãŒãã®ã¾ã¾ä»˜ã„ã¦ã„ã¾ã™ã€‚ =M-x debug-on-XXXX= ã§å…¨ã¦ã®ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’èµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(defalias 'debug-on-c 'gdb)
(defalias 'debug-on-java 'jdb)
(defalias 'debug-on-perl 'perldb)
(defalias 'debug-on-python 'pdb)
;; dbx
;; sdb
#+end_src


* CSS

CSSç·¨é›†ã®ãŸã‚ã®ã‚¿ãƒ–å¹…ãªã©ã‚’è¨­å®šã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'css-mode)

(setq css-indent-offset 2)
#+end_src

* [[https://github.com/TakesxiSximada/emacs.d/blob/main/prettier/prettier-buffer.el][prettier-buffer.el]]

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã¨ã—ã¦[[https://github.com/prettier/prettier][prettier]]ã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚å…¬å¼ã®æ‹¡å¼µã§ã‚ã‚‹[[https://github.com/prettier/prettier-emacs][Prettier-js for Emacs]]ã‚‚ã‚ã‚Šã¾ã™ãŒã€ä½¿ç”¨æ„ŸãŒåˆã‚ãªã‹ã£ãŸã®ã§å¿…è¦ãªæ©Ÿèƒ½ã ã‘ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ç‹¬ç«‹ã•ã›ã‚‹ã»ã©ã§ã‚‚ãªã‹ã£ãŸãŸã‚ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã® =prettier= ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¾ã—ãŸã€‚ãã®ãŸã‚load-pathã‚’è¿½åŠ ã—ã€ =prettier-buffer= ã‚’requireã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(add-to-list 'load-path (expand-file-name "~/.emacs.d/prettier"))

(require 'prettier-buffer)
#+end_src

å®Ÿè¡Œã¯ =M-x prettier-buffer= ã§å®Ÿè¡Œã§ãã¾ã™ã€‚

* org-src

ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚„è¦‹æ „ãˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-src-fontify-natively t
    org-src-window-setup 'current-window
    org-src-strip-leading-and-trailing-blank-lines t
    org-src-preserve-indentation t
    org-src-tab-acts-natively nil)
#+end_src

* org-agenda

ã‚¿ã‚¹ã‚¯ã®ç®¡ç†ã« =org-agenda= ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
agendaãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ =org-agenda-files= ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ä»Šã™ã¹ãã‚¿ã‚¹ã‚¯ã«é›†ä¸­ã™ã‚‹ãŸã‚æ¦‚è¦ã§ã¯ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ã®ã¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-agenda-span 'day)
#+end_src

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã¯ã‚¿ã‚¹ã‚¯ã®è¦‹ç©ã‚‚ã‚Šæ™‚é–“ã¨æ‰€è¦æ™‚é–“ãŒè¡¨ç¤ºã•ã‚Œ
ã¦ã„ãªã„ãŸã‚ã‚¿ã‚¹ã‚¯ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’åˆ¤æ–­ã§ãã¾ã›ã‚“ã€‚ãã“ã§è¦‹ç©ã‚‚ã‚Šæ™‚é–“ã¨æ‰€
è¦æ™‚é–“ã‚’é›†è¨ˆã™ã‚‹é–¢æ•°ã‚’è¿½åŠ ã—ãã‚Œã‚’ç”¨ã„ã¦ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã«è¡¨ç¤ºã™ã‚‹ã‚ˆã†
ã«å¤‰æ›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(require 'org)
(require 'org-clock)

(defun org-clock-get-item-content ()
  (save-excursion
    (let ((start-point (progn (org-back-to-heading t)
			      (point)))
	  (end-point (progn (org-end-of-subtree t t)
			    (point))))
      (buffer-substring-no-properties start-point end-point))))


(defun org-clock-sum-current-item-custom ()
  (interactive)
  (condition-case err-var
      (let* ((content (org-clock-get-item-content))
	     (minute (with-temp-buffer (insert content)
				       (org-clock-sum-current-item))))
	(if (> minute 0)
	    minute
	  ""))
    (error "-")))
#+end_src

ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã§ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã ã‘ã§ã¯ã‚¿ã‚¹ã‚¯ã®å†…å®¹ã‚’æ¨æ¸¬ã—ã«ãã„ãŸ
ã‚è¦ªã®ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚‚è¡¨ç¤ºã—ã¾ã™ã€‚ =%-10.20b= ãªã©ã®è¡¨ç¤ºã‚’å…¥ã‚Œã‚‹ã“ã¨
ã§è¦ªã‚¿ã‚¹ã‚¯ã‚‚è¡¨ç¤ºã§ãã¾ã™ã€‚

å„TODOã«æ‹…å½“è€…ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚æ‹…å½“è€…ã¯ =org-property= ã‚’åˆ©ç”¨ã— =ASSIGNEE= å±æ€§ã«æ‹…å½“è€…åã‚’è¨˜è¿°ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
æ¬¡ã®é–¢æ•°ã§ç¾åœ¨ä½ç½®ã®TODOã®æ‹…å½“è€…ã‚’å–å¾—ã™ã‚‹ã€‚ã“ã®é–¢æ•°ã¯ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ãƒ“ãƒ¥ãƒ¼ã§æ‹…å½“è€…ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ç”¨ã„ã‚‹ã€‚
ã‚¿ã‚¹ã‚¯ã®ç®¡ç†æ‰‹æ³•ã¯äººã«ã‚ˆã£ã¦ã‹ãªã‚Šç•°ãªã‚‹ãŒã€ãƒãƒ¼ãƒ ä¸»ä½“ã§è€ƒãˆã‚‹ã¨æ‹…å½“è€…ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„TODOã«ã¯æ‹…å½“è€…ã‚’å‰²ã‚ŠæŒ¯ã‚‹ã»ã†ãŒã‚ˆãã€å€‹äººä¸»ä½“ã§è€ƒãˆã‚‹ã®ã§ã‚ã‚Œã°æ‹…å½“è€…ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„TODOã¯è‡ªåˆ†ç”¨ã®TODOã¨ã„ã†æ‰±ã„ã«ã—ãŸã»ã†ãŒã€ç®¡ç†ãŒã—ã‚„ã™ããªã‚‹ã€‚
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦åˆ‡ã‚Šå‡ºã™ã®ã§ã‚ã‚Œã°ã€ã“ã®ã‚ãŸã‚Šã‚’ä¸¡æ–¹å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã€è¨­è¨ˆã—ãŸã»ã†ãŒã‚ˆã„ã€‚
ç¾çŠ¶ã¯ç‰¹ã«ä½•ã‚‚è€ƒãˆãšã€æ‹…å½“è€…ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã¯nullã‚’è¿”ã—ã€è¡¨ç¤ºã‚‚nullã¨ãªã‚‹ã€‚

#+begin_src emacs-lisp
(setq org-assign-assignee-default-assignee nil)

(defun org-assign-assignee-value-custom ()
  "ç¾åœ¨ä½ç½®ã®æ‹…å½“è€…ã‚’å–å¾—ã™ã‚‹"
  (interactive)
  (or
    (cdr (assoc "ASSIGNEE" (org-entry-properties)))
    org-assign-assignee-default-assignee))
#+end_src


#+begin_src emacs-lisp
;(setq org-agenda-prefix-format
;      '((agenda . "%4(org-clock-sum-current-item-custom) %4e %6(org-assign-assignee-value-custom) %t %.4s %-6.6c %-25.50b ")
;        (todo . " %i %-12:c %-6e")
;        (tags . " %i %-12:c")
;        (search . " %i %-12:c")))
#+end_src

* ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¡¨ç¤ºã™ã‚‹

#+begin_src emacs-lisp
(use-package org-agenda-property :ensure t :defer t)
#+end_src

å‚è€ƒ: [[https://blog.symdon.info/posts/1617669052/][org-agendaã®day viewã§locationã®è¡¨ç¤ºã‚’è¡Œã†]]

* org-todo

org-todoã®è«–ç†æ§‹é€ ã‚’å¼·åˆ¶ã—ã¾ã™ã€‚
ä¾å­˜ã—ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãã‚Œã‚‰ã‚’å®Œäº†ã—ã¦ã„ãªã„ã¨æ¬¡ã®ã‚¿ã‚¹ã‚¯ã«é€²ã‚ã¾ã›ã‚“ã€‚

#+begin_src emacs-lisp
(setq org-enforce-todo-dependencies t)
#+end_src

ãŸã ã—ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯ç¾åœ¨é€²è¡Œä¸­ã®ã‚¿ã‚¹ã‚¯ã‚’é˜»å®³ã—ã¦ã—ã¾ã†ã®ã§ç„¡åŠ¹ã«ã—ã¾ã™ã€‚
æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ =org-enforce-todo-checkbox-dependencies= ã‚’ç”¨ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-enforce-todo-checkbox-dependencies nil)
#+end_src

org-todoã®è«–ç†æ§‹é€ ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã—ã¾ã™ã€‚
ã¾ã å®Ÿè¡Œã®æ¡ä»¶ã‚’æº€ãŸã•ãªã„org-todoã¯org-agendaã§ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆè¡¨ç¤ºã«ãªã‚Šã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-track-ordered-property-with-tag t)
#+end_src

* org-priority

org-modeã®ã‚¿ã‚¹ã‚¯ã®å„ªå…ˆåº¦ã‚’è¨­å®šã—ã¾ã™ã€‚

å„ªå…ˆåº¦ã¨ã—ã¦A=Zã®æ–‡å­—ã‚’ä½¿ã„ã¾ã™ã€‚

#+begin_src emacs-lisp
(setq org-priority-lowest ?Z)
#+end_src

org-modeåŠã³org-agenda-modeã§ã¯ãã‚Œãã‚Œ =M-n= =M-p= ã‚’ç”¨ã„ã¦å„ªå…ˆåº¦ã‚’å¤‰æ›´ã—ã¾ã™ã€‚


#+begin_src emacs-lisp
(with-eval-after-load 'org
  (define-key org-mode-map (kbd "M-p") 'org-priority-up)
  (define-key org-mode-map (kbd "M-n") 'org-todo)

  (add-hook 'org-mode-hook #'visual-fill-column-mode)
  (add-hook 'org-mode-hook #'toggle-truncate-lines)
  )

(with-eval-after-load 'org-agenda
  (define-key org-agenda-mode-map (kbd "M-p") #'org-agenda-priority-up)
  (define-key org-agenda-mode-map (kbd "M-n") #'org-agenda-todo)
  )
#+end_src

* Org Babel

Org Babelã¯org-modeã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãã®å‡ºåŠ›ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åæ˜ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã„ã‚ã‚†ã‚‹æ–‡èŠ¸çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹ã€‚

#+begin_src emacs-lisp
(org-babel-do-load-languages
 'org-babel-load-languages
 '(
   (ditaa . t)
   (scheme . t)
   (emacs-lisp . t)
   (python . t)
   (restclient . t)
   (http . t)
   (shell . t)
   (sql . t)))
#+end_src

Org Babelã®ã‚³ã‚¢éƒ¨åˆ†ã¯ob-core.elã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚ä¾‹ãˆã°Org-modeãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ =C-c C-c= ã‚’å®Ÿè¡Œã™ã‚‹ã¨ =org-babel-execute-src-block= é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã€‚ã“ã®æ™‚ã«ç”¨ã„ã‚‹Org Babelç”¨æ‹¡å¼µãŒã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã«ã‚ˆã£ã¦å®Ÿè£…ã•ã‚ŒãŸåˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹å ´åˆã€ãã®æ‹¡å¼µãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚ãã®å ´åˆã€Org Babelã¯å‡¦ç†ã®å®Ÿè¡Œã«å¤±æ•—ã™ã‚‹ã€‚å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’requireã§èª­ã¿è¾¼ã¿ã€å†åº¦  =org-babel-execute-src-block= é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚Œã°ã‚ˆã„ã®ã ãŒã€ãã®éƒ½åº¦Lispã‚’è¨˜è¿°ã—evalã™ã‚‹ã®ã¯é¢å€’ã ã€‚ãã“ã§org-core.elãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰ã€ã“ã“ã§ä½¿ç”¨å¯èƒ½ãªæ‹¡å¼µã‚‚requireã™ã‚‹ã“ã¨ã«ã—ãŸã€‚

#+begin_src emacs-lisp
(with-eval-after-load 'ob-core
  (require 'ob-async)
  (require 'ob-ditaa)
  (require 'ob-emacs-lisp)
  (require 'ob-http)
  (require 'ob-python)
  (require 'ob-restclient)
  (require 'ob-restclient)
  (require 'ob-scheme)
  (require 'ob-shell)
  (require 'ob-sql))
#+end_src


* ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

ã“ã“ã§ã¯å¿…è¦ã«å¿œã˜ã¦å®šç¾©ã—ãŸæ§˜ã€…ãªç›®çš„ã®é–¢æ•°ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

** face

ç¾åœ¨ã®ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®faceåã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(defun what-face (pos)
  "Display current position face name."
  (interactive "d")
  (if-let ((face-name (get-text-property pos 'face)))
      (message "Face: %s" face-name)))
#+end_src

* AsciiDoc

AsciiDocã¯ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã®ãŸã‚è¨˜æ³•(Nortation)ã®1ã¤ã§ã™ã€‚
AsciiDocã‚’Emacsã§è¡¨ç¤ºã—ãŸã‚Šç·¨é›†ã™ã‚‹å ´åˆæ§˜ã€…ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

** adoc-mode

adoc-modeã¯Emacsä¸Šã§AsciiDocå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ãŸã‚ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚
ã—ã‹ã—ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚„ãƒ¡ã‚¿æƒ…å ±ã®è¡¨ç¤ºã‚µã‚¤ã‚ºãŒã¨ã¦ã‚‚å°ã•ããªã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã§ã¯ç·¨é›†æ™‚ã«èª­ã‚ãªã„ã®ã§ã€ã¡ã‚‡ã†ã©ã‚ˆã„å€¤ã«è¨­å®šã—ç›´ã—ã¾ã™ã€‚

#+begin_src emacs-lisp
(use-package adoc-mode :ensure t :defer t
  :config
  (set-face-attribute markup-comment-face nil :width 'normal :height 1)
  (set-face-attribute markup-meta-face nil :width 'normal :height 1 :foreground "red")
  )
#+end_src

** asciidoc-view

ewwã‚’ç”¨ã„ã¦AsciiDocã‚’è¡¨ç¤ºã™ã‚‹ã€‚


* Font

ãƒ•ã‚©ãƒ³ãƒˆã¯Source Han Mono[fn:source-han-mono-repo]ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

ãƒ•ã‚©ãƒ³ãƒˆã‚’èª¿ç¯€ã—ã¦æ–‡å­—å¹…ãŒåˆã†ã‚ˆã†ã«ã™ã‚‹ã€‚

#+begin_src emacs-lisp
;; (progn
;;   (set-face-attribute 'default nil :family "æºãƒç­‰å¹…" :height 120)
;;   (set-fontset-font nil 'japanese-jisx0208 (font-spec :family "æºãƒç­‰å¹…" :size 16))
;;   (set-fontset-font nil 'japanese-jisx0208-1978 (font-spec :family "æºãƒç­‰å¹…" :size 16))
;;   (set-fontset-font nil 'japanese-jisx0212 (font-spec :family "æºãƒç­‰å¹…" :size 16))
;;   (set-fontset-font nil 'japanese-jisx0213.2004-1 (font-spec :family "æºãƒç­‰å¹…" :size 16))
;;   (set-fontset-font nil 'jisx0201 (font-spec :family "æºãƒç­‰å¹…" :size 12))
;;   (set-fontset-font nil 'symbol (font-spec :family "Apple Color Emoji" :size 12))
;;   (set-fontset-font nil '(?â˜º . ?â˜º) (font-spec :family "Apple Color Emoji" :size 6))
;;   (set-fontset-font nil '(?ğŸ€„ . ?ğŸ€ˆ) (font-spec :family "Apple Color Emoji" :size 9))
;;   (set-fontset-font nil '(?ä¸€ . ?ä¸€) (font-spec :family "æºãƒç­‰å¹…" :size 12))
;;   )
#+end_src

| é¡ä¼¼æ–‡å­— |
|---------|
| l I 1   |
| o O 0   |
| q 9     |
| s S 5   |
| x X     |
| z Z 2   |
| ä¸€ â€•     |


| ãšã‚Œç¢ºèªç”¨ åŠè§’40å­—ã€å…¨è§’20å­—            |                    |
|------------------------------------------+--------------------|
| AIfUEaiueoAIUEOaiueoAIUEOaiueoAIUEOaiueo | ASCIIè‹±å­—          |
| 0123456789012345678901234567890123456789 | ASCIIæ•°å­—          |
| ï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µ | JIS X 0201ï½¶ï¾…       |
| ã‚ã„ã†ãˆãŠã‚ã„ã†ãˆãŠã‚ã„ã†ãˆãŠã‚ã„ã†ãˆãŠ | JIS X 0208ã²ã‚‰ãŒãª |
| ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚¢ã‚¤ã‚¦ã‚¨ã‚ª | åŒã‚«ã‚¿ã‚«ãƒŠ         |
| ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ | åŒè‹±å­—             |
| äºœå”–å¨ƒé˜¿å“€äºœå”–å¨ƒé˜¿å“€äºœå”–å¨ƒé˜¿å“€äºœå”–å¨ƒé˜¿å“€ | åŒæ¼¢å­—             |
| ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ | JIS X 0213æ¼¢å­—     |
| ğŸ˜ƒğŸ˜‡ğŸ˜ğŸ˜œğŸ˜¸ğŸ™ˆğŸºğŸ°ğŸ‘½ğŸ‰ğŸ’°ğŸ¡ğŸ…ğŸªğŸ•ğŸš€ğŸš»ğŸ’©ğŸ“·ğŸ“¦ | çµµæ–‡å­—             |
| â˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜ºâ˜º     | çµµæ–‡å­—             |
| ğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆ           | çµµæ–‡å­—             |



|------------+--------------------|
| AIUEOaiueo | ASCIIè‹±å­—          |
| 1234567890 | ASCIIè‹±å­—          |
| ï½±ï½²ï½³ï½´ï½µï½±ï½²ï½³ï½´ï½µ | JIS X 0201ï½¶ï¾…       |
| ã‚ã„ã†ãˆãŠ | JIS X 0208ã²ã‚‰ãŒãª |
| ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª | åŒã‚«ã‚¿ã‚«ãƒŠ         |
| ğ €‹ğ¡ˆ½ğ¡Œ›ğ¡‘®ğ¡¢½ | JIS X 0213æ¼¢å­—     |
| ğŸ˜ƒğŸ˜‡ğŸ˜ğŸ˜œğŸ˜¸ | çµµæ–‡å­—             |
| ğŸ™ˆğŸºğŸ°ğŸ‘½ğŸ‰ |                    |
| ğŸ’°ğŸ¡ğŸ…ğŸªğŸ• |                    |
| ğŸš€ğŸš»ğŸ’©ğŸ“·ğŸ“¦ |                    |
| â˜ºâ˜ºâ˜ºâ˜ºâ˜º | çµµæ–‡å­—             |
| ğŸ€„ğŸ€„ğŸ€„ğŸ€„ğŸ€„ |                    |
| ï¼¡ï¼¡ï¼¡ï¼¡ï¼¡ |                    |
| äºœäºœäºœäºœäºœ |                    |
| ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ | åŒè‹±å­—             |
| äºœå”–å¨ƒé˜¿å“€ | åŒæ¼¢å­—             |
| ğŸ€…ğŸ€…ğŸ€…ğŸ€…ğŸ€…ğŸ€…  |                    |
| ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€…

(ã“ã®æ–‡å­—åˆ—ã¯ https://qiita.com/query1000/items/4b0b8db872adc1a5e2e9V ã‹ã‚‰æŠœç²‹)

* [[https://github.com/Fanael/edit-indirect][edit-indirect]]

ãƒãƒƒãƒ•ã‚¡ã®ä¸€éƒ¨ã®é ˜åŸŸã‚’åˆ¥ã®ãƒãƒƒãƒ•ã‚¡ã«ç§»ã—ã¦ç·¨é›†ã™ã‚‹æ©Ÿèƒ½ã‚’edit-indirectã‚’ç”¨ã„ã¦å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚edit-indirectã§ã¯ =C-c C-c= ã«ã¯ =edit-indirect-commit= ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ã—ã‹ã—Org-modeãªã© =C-c C-c= ã‚’æ—¢ã«ä½¿ã£ã¦ã„ã‚‹ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã€ãã®è¨­å®šãŒé‚ªé­”ã«ãªã‚‹ã®ã§ç„¡åŠ¹åŒ–ã™ã‚‹ã€‚ã¾ãŸedit-indirectã«å…¥ã£ãŸæ™‚ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®åˆ¤å®šå‡¦ç†ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã€‚

#+begin_src emacs-lisp
(with-eval-after-load 'edit-indirect
  (define-key edit-indirect-mode-map (kbd "C-c C-c") nil)


  (defun edit-indirect-custom-guess-major-mode (_parent-buffer _beg _end)
  "Guess major-mode to parent-buffer major-mode.

Returns symbol of major-mode.
"
  (with-current-buffer _parent-buffer
    (goto-char _beg)

    (if (eq major-mode 'org-mode)
	(if-let ((lang (nth 0 (org-babel-get-src-block-info))))
	    (intern (format "%s-mode" lang))
	  'org-mode)
      major-mode)))

  (defun edit-indirect-custom-apply-major-mode  (_parent-buffer _beg _end)
    "Apply major-mode to parent-buffer major-mode."
    (funcall (edit-indirect-custom-guess-major-mode _parent-buffer _beg _end)))
  )
#+end_src

* ã‚¿ã‚¹ã‚¯

ã‚¿ã‚¹ã‚¯å®Ÿè¡Œæ™‚ã®é›†ä¸­åŠ›ã®é˜»å®³ã‚’æœ€å°é™ã«ã™ã‚‹ãŸã‚ã€é–¢é€£ã™ã‚‹æƒ…å ±ä»¥å¤–ã‚’è¦‹ãˆãªã„ã‚ˆã†ã«ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã™ã‚‹ã€‚é–‹å§‹æ™‚ã« =task-join= ã€çµ‚äº†æ™‚ã« =task-leave= ã‚’å‘¼ã³å‡ºã™ã€‚

#+begin_src emacs-lisp
(require 'edit-indirect)
(require 'org-clock)


(defun task-join ()
  "Join the task."
  (interactive)
  (org-narrow-to-subtree)
  (mark-whole-buffer)
  (switch-to-buffer
   (edit-indirect-region
    (region-beginning)
    (region-end)))
  (org-clock-in)
  )

(defun task-leave ()
  "Leave the clock-in task."
  (interactive)
  (if-let ((clock-buf (org-clock-is-active)))
      (with-current-buffer clock-buf
	(org-clock-out)))
  (edit-indirect-commit)
  (widen))
#+end_src

* grip-mode

Org-modeã‚„Markdownã®ç·¨é›†æ™‚ã«ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚‹ã¨éå¸¸ã«æ—ã‚‹ã€‚
Emacsã§ã¯grip-modeã‚’ä½¿ã†ã“ã¨ã§å®Ÿç¾ã§ãã‚‹ã€‚

#+begin_src  emacs-lisp
(use-package grip-mode :ensure t :defer t)
#+end_src

grip-modeã¯å†…éƒ¨ã§Gripã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚ã“ã®GripãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤
ãƒ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã€‚Gripã¯Pythonã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€
pipã‚’ç”¨ã„ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

#+begin_src bash
pip install grip
#+end_src

å‚è€ƒ :: [[https://blog.symdon.info/posts/1638063555/]]

* org-export

org-exportã¯org-mdoeã§è¨˜è¿°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥ã®å½¢å¼ã«å¤‰æ›ã™ã‚‹ã€‚

ä¸Šä»˜ãæ–‡å­—(^ã§æŒŸã‚€)ã¨ä¸‹ä»˜ãæ–‡å­—ã®è¨˜æ³•(_ã§æŒŸã‚€)ã¯é€šå¸¸ã®è¨˜è¿°ã§ä½¿ç”¨ã™ã‚‹ãŸ
ã‚ã€æ›´ã«{}ã®æŒ‡å®šãŒå¿…è¦ã«ãªã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚

#+begin_src emacs-lisp
(setq org-export-with-sub-superscripts '{})
#+end_src

å‚è€ƒ :: [[https://blog.symdon.info/posts/1605311844/]]

** Orgãƒ•ã‚¡ã‚¤ãƒ«ã‚’PDFã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

LaTeXã‚’ä½¿ã£ã¦Orgãƒ•ã‚¡ã‚¤ãƒ«ã‚’PDFã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã€‚
org-latex-export-to-pdfãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒã€æ–‡å­—ã‚³ãƒ¼ãƒ‰é–¢é€£ã§å‹•ä½œã—ãªã‹ã£ãŸãŸã‚ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥èµ·å‹•ã™ã‚‹å½¢ã§ç‹¬è‡ªã«å®Ÿè£…ã—ãŸã€‚

#+begin_src emacs-lisp
(defun org-pdf-export-to-pdf-via-latex ()
  "Export PDF file from org file via latex"
  (interactive)
  (let* ((tex-file-name (org-latex-export-to-latex))
	 (base-file-name (file-name-base tex-file-name))
	 (dvi-file-name (format "%s.dvi" base-file-name))
	 (pdf-file-name (format "%s.pdf" base-file-name))
	 (vterm-shell (format "bash -c 'platex %s && dvipdfmx %s'"
			      tex-file-name
			      dvi-file-name))
	 (vterm-buffer-name (format "*Org PDF Exporting: %s" pdf-file-name))
	 (vterm-kill-buffer-on-exit nil))
    (vterm)
    pdf-file-name))
#+end_src

* aspell

ã‚¹ãƒšãƒ«ãƒã‚§ãƒƒã‚«ãƒ¼ã€‚

http://aspell.net/

#+begin_src emacs-lisp
(setq-default ispell-program-name "aspell")
(with-eval-after-load "ispell"
  (setq ispell-local-dictionary "en_US")
  (add-to-list 'ispell-skip-region-alist '("[^\000-\377]+")))
#+end_src

aspellè‡ªä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ Homebrewã®å ´åˆ =brew install aspell= ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

* AquaSKK

IMEã«ã¯AquaSKKã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚aquaskk/keymap.conf ã‚’ =~/Library/Application Support/AquaSKK/= é…ä¸‹ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚

* mmm-mode

mmm-modeã¯1ã¤ã®ãƒãƒƒãƒ•ã‚¡å†…ã§è¤‡æ•°ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
ãŸã ã—ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.5.8ã«ã¯vue-modeã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹æ—¢çŸ¥ã®ãƒã‚°[fn:mmm-mode-issue-112]ãŒã‚ã‚‹ã€‚
ã“ã®å•é¡Œã‚’å›é¿ã™ã‚‹ã«ã¯ã„ãã¤ã‹æ–¹æ³•ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ãŒç¢ºèªã—ãŸã¨ã“ã‚ä»¥ä¸‹ã®é–¢æ•°ã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã§å›é¿ã§ããŸ[fn:mmm-mode-issue-112-wa]ã€‚

#+begin_src emacs-lisp
(require 'mmm-region)


(defun mmm-syntax-propertize-function (start stop)
  "Composite function that applies `syntax-table' text properties.
It iterates over all submode regions between START and STOP and
calls each respective submode's `syntax-propertize-function'."
  (let ((saved-mode mmm-current-submode)
        (saved-ovl  mmm-current-overlay))
    (mmm-save-changed-local-variables
     mmm-current-submode mmm-current-overlay)
    (unwind-protect
        (mapc (lambda (elt)
                (let* ((mode (car elt))
                       (func (get mode 'mmm-syntax-propertize-function))
                       (beg (cadr elt)) (end (nth 2 elt))
                       (ovl (nth 3 elt))
                       ;; FIXME: Messing with syntax-ppss-* vars should not
                       ;; be needed any more in Emacsâ‰¥26.
                       syntax-ppss-cache
                       syntax-ppss-last)
                  (goto-char beg)
                  (mmm-set-current-pair mode ovl)
                  (mmm-set-local-variables mode mmm-current-overlay)
                  (save-restriction
                    (when mmm-current-overlay
                      (narrow-to-region (overlay-start mmm-current-overlay)
                                        (overlay-end mmm-current-overlay))
                      (put-text-property
                       (point-min) (point-max)
                       'syntax-table (syntax-table)))
                    (cond
                     (func
                      (funcall func beg end))
                     (font-lock-syntactic-keywords
                      (let ((syntax-propertize-function nil))
                        (font-lock-fontify-syntactic-keywords-region beg end))))
                    (run-hook-with-args 'mmm-after-syntax-propertize-functions
                                        mmm-current-overlay mode beg end))))
              (mmm-regions-in start stop))
      (mmm-set-current-pair saved-mode saved-ovl)
      (mmm-set-local-variables (or saved-mode mmm-primary-mode) saved-ovl))))
#+end_src

* ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®æ–‡å­—åˆ—ã‚’ç½®ãæ›ãˆã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

=replace-region-contents= ã‚’ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã—ã€é©å¿œã™ã‚‹æ–‡å­—åˆ—å‡¦ç†ã‚’ä»»æ„ã«æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸã€‚

#+begin_src emacs-lisp
(defun apply-and-replace-region-string (func beg end)
  "Replace after appling function the region string"
  (interactive "a\nr")
  (replace-region-contents
   beg end (lambda ()
	     (let ((txt (buffer-substring-no-properties beg end)))
	       (funcall func txt)))))
#+end_src

ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®æµ®å‹•å°æ•°ç‚¹å½¢å¼ã®UNIXã‚¨ãƒãƒƒã‚¯ã‚¿ã‚¤ãƒ ã‚’æ™‚åˆ»å½¢å¼ã«å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã—ãŸã€‚

#+begin_src emacs-lisp
(defun float-time-to-datetime-string (float-style-string)
  "Convert unix epoc time (floating point style) string to date time formated string."
  (format-time-string
   "%Y-%m-%dT%H:%M:%S.%6N"
   (encode-time (decode-time
		 (string-to-number float-style-string)))))
#+end_src

* EditorConfig

EditorConfigã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®ã‚¨ãƒ‡ã‚£ã‚¿ã®è¨­å®šã‚’çµ±ä¸€ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(use-package editorconfig
  :ensure t
  :config
  (editorconfig-mode 1))
#+end_src

* Frameæ¯ã«è‰²èª¿ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹

#+begin_src emacs-lisp
(setq account-alist '((sym . "ffffff")))

(defun switch-to-color (label)
  (interactive (list (completing-read "Label: "
				      (mapcar 'car account-alist))))
  (if-let ((color-fg (cdr (assoc (intern label) account-alist))))
      (set-foreground-color color-fg)))
#+end_src

* ãã®ä»–

#+begin_src emacs-lisp
(put 'narrow-to-region 'disabled nil)
(put 'dired-find-alternate-file 'disabled nil)
#+end_src

* è¿½åŠ ã®è¨­å®šã®èª­ã¿è¾¼ã¿

å„ç’°å¢ƒæ¯ã«èª­ã¿è¾¼ã¿ã™ã‚‹ã‹ã©ã†ã‹ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„è¨­å®šã‚‚ã‚ã‚‹ã€‚
ãã‚Œã‚‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã«è¿½åŠ ã§èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å–å¾—ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(save-window-excursion
  (when (file-exists-p custom-env-file)
    (with-current-buffer (find-file-read-only custom-env-file)
      (dotenv-mode-apply-all))))

(mapc (lambda (path) (add-to-list 'custom-additional-load-file-list path))
      (split-string (getenv "EMACS_ADDITINONAL_LOAD_FILE_PATH") ":"))

(mapc (lambda (path) (load-file path))
      custom-additional-load-file-list)
#+end_src

* Color Themeã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#+begin_example emacs-lisp
(solarized-create-theme-file-with-palette 'dark 'simple-darkness
 '("#000000"  ;; darkest-base
   "#ffffff"  ;; brightest-base
   "#dbb32d"  ;; yellow
   "#e67f43"  ;; orange
   "#ed4a46"  ;; red
   "#eb6eb7"  ;; magenta
   "#a580e2"  ;; violet
   "#368aeb"  ;; blue
   "#3fc5b7"  ;; cyan
   "#70b433"  ;; green
   ))
#+end_example

* S3

S3ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã¯s3edã‚’ä½¿ç”¨ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(use-package s3ed :ensure t)
#+end_src

åŸºæœ¬çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ã¿ãƒ€ãƒŸãƒ¼ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚
ãã®ç‚ºã«ä½¿ç”¨ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’awslã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å®šç¾©ã—ã¦ã„ã‚‹ãŒã€
ãã‚Œã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«aws cliã®ã‚³ãƒãƒ³ãƒ‰ã‚’è¿”ã™é–¢æ•°ã‚’ä¸Šæ›¸ãã™ã‚‹ã€‚

#+begin_src emacs-lisp
(defun s3ed-aws-cli (cmd)
  "Run the aws cli (s3) command with the configured arguments.
The given CMD string will be appended."
  (let* ((profile-arg (if s3ed-profile-name (format " --profile %s" s3ed-profile-name) "")))
    (format "awsl%s s3 %s" profile-arg cmd)))
#+end_src

* Magit

Magitã¯Emacsç”¨ã®Gitãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã€Gitã‚³ãƒãƒ³ãƒ‰ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã¨ã—ã¦
transientã‚’ç”¨ã„ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚ä»•æ§˜ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ãŸã‚ã€é–¢æ•°ã®ä¸Š
æ›¸ãã‚’ã™ã‚‹ã€‚

magit-commitã€magit-pushã€magit-rebaseã®3ã¤ã®Emacsã®ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦
=--no-verify= ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–‡å­—åˆ—ãŒçµ±ä¸€ã•ã‚Œ
ã¦ã„ãªã„ã€‚magit-commitã®ã¿ =-n= ã§æŒ‡å®šã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ãŸã‚ä»–ã®2ã¤
ã®ã‚³ãƒãƒ³ãƒ‰ã«ãªã‚‰ã„ =-h= ã§æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã€‚

| é–¢æ•°         | =--no-verify= ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ‡å®š | =--no-verify= ã®å¤‰æ›´å¾Œã®æŒ‡å®š |
|--------------+----------------------------------+------------------------------|
| magit-commit | =-n=                             | =-h=                         |
| magit-push   | =-h=                             | =-h=                         |
| magit-rebase | =-h=                             | =-h=                         |

#+begin_src emacs-lisp
(require 'magit)
(require 'transient)

(transient-define-prefix magit-commit ()
  "Create a new commit or replace an existing commit."
  :info-manual "(magit)Initiating a Commit"
  :man-page "git-commit"
  ["Arguments"
   ("-a" "Stage all modified and deleted files"   ("-a" "--all"))
   ("-e" "Allow empty commit"                     "--allow-empty")
   ("-v" "Show diff of changes to be committed"   ("-v" "--verbose"))
   ("-h" "Disable hooks"                          ("-n" "--no-verify"))
   ("-R" "Claim authorship and reset author date" "--reset-author")
   (magit:--author :description "Override the author")
   (7 "-D" "Override the author date" "--date=" transient-read-date)
   ("-s" "Add Signed-off-by line"                 ("-s" "--signoff"))
   (5 magit:--gpg-sign)
   (magit-commit:--reuse-message)]
  [["Create"
    ("c" "Commit"         magit-commit-create)]
   ["Edit HEAD"
    ("e" "Extend"         magit-commit-extend)
    ("w" "Reword"         magit-commit-reword)
    ("a" "Amend"          magit-commit-amend)
    (6 "n" "Reshelve"     magit-commit-reshelve)]
   ["Edit"
    ("f" "Fixup"          magit-commit-fixup)
    ("s" "Squash"         magit-commit-squash)
    ("A" "Augment"        magit-commit-augment)
    (6 "x" "Absorb changes" magit-commit-autofixup)
    (6 "X" "Absorb modules" magit-commit-absorb-modules)]
   [""
    ("F" "Instant fixup"  magit-commit-instant-fixup)
    ("S" "Instant squash" magit-commit-instant-squash)]]
  (interactive)
  (if-let ((buffer (magit-commit-message-buffer)))
      (switch-to-buffer buffer)
    (transient-setup 'magit-commit)))
#+end_src

** pushæ“ä½œå¾Œã«ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ•ã‚¡ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã‚‹

Gitãƒ•ãƒƒã‚¯ãªã©ã§ãƒ†ã‚¹ãƒˆã‚„æ•´å½¢ã™ã‚‹ã¨ã€ãã®çµæœã‚’å³åº§ã«ç¢ºèªã—ãŸã„ã€‚ãã®ãŸã‚ã€git pushæ™‚ã«ã¯Magitã®ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒƒãƒ•ã‚¡ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

https://blog.symdon.info/posts/1654845224/

#+begin_src emacs-lisp
(add-hook 'magit-credential-hook #'magit-process-buffer)
#+end_src

* é›†ä¸­åŠ›ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®å·¥å¤«

[[https://blog.symdon.info/posts/1652142295]]

** Frame Title

é›†ä¸­åŠ›ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã€frame-titleã«org-clock-inã—ãŸã‚¿ã‚¹ã‚¯ã®åç§°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

=org-clock-in= åŠã³ =org-clock-out= ã•ã‚ŒãŸæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ãƒ•ãƒƒã‚¯ã¨ã—ã¦ã€è‡ªä½œã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´ã™ã‚‹é–¢æ•°ã‚’è¨­å®šã—ãŸã€‚org-clock-inã—ã¦ã„ãªã„æ™‚ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ã«ã¯ãƒãƒƒãƒ•ã‚¡åã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ãŸã€‚

#+begin_src emacs-lisp
(defun change-frame-title-to-org-clock-current-task-name ()
  "Change frame title to org- clock current task name.

Display current buffer name if not clock in now."
  (interactive)
  (setq frame-title-format (or org-clock-current-task "%b")))

(add-hook 'org-clock-in-hook #'change-frame-title-to-org-clock-current-task-name)
(add-hook 'org-clock-out-hook #'change-frame-title-to-org-clock-current-task-name)
#+end_src

** Mini Buffer

ã‚¢ã‚¤ãƒ‰ãƒ«çŠ¶æ…‹ã«ãªã£ãŸã‚‰ä½œæ¥­ä¸­ã®ã‚¿ã‚¹ã‚¯åã‚’ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã«è¡¨ç¤ºã™ã‚‹ã€‚

#+begin_src emacs-lisp
(defun display-current-task-name-in-to-mini-buffer ()
  "Display current task name in to mini buffer"
  (interactive)
  (when org-clock-current-task
    (let ((minibuffer-message-timeout nil))
      (minibuffer-message org-clock-current-task))))

(setq display-current-task-name-in-to-mini-buffer-timer
      (run-with-idle-timer 3 t #'display-current-task-name-in-to-mini-buffer))
#+end_src

* DDSKK

ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯Daredevil SKKã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚

https://github.com/skk-dev/ddskk

#+begin_src emacs-lisp
(global-set-key "\C-x\C-j" #'skk-mode)

(defun disable-mode-line ()
  (setq-local mode-line-format nil))

(autoload 'skk-mode "skk")

(with-eval-after-load 'skk
  ;; SKKãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ã‚ã£ã¦ã‚‚ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤ºã—ãªã„
  (add-hook 'skk-mode-hook 'disable-mode-line)
  (setq-default mode-line-format nil)
  (setq-default skk-modeline-input-mode nil)

  ;; çµ¶å¯¾ã«ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤ºã•ã›ãŸããªã„ãŸã‚
  ;; ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã®è¨­å®šé–¢æ•°ã‚’ä¸Šæ›¸ãã™ã‚‹ã€‚
  (defun skk-setup-modeline () nil)

  ;; SKKã®å€™è£œã®è¡¨ç¤ºæ–¹æ³•
  (setq skk-show-tooltip nil)
  (setq skk-show-inline 'vertical)
  (setq skk-egg-like-newline nil)
  (setq skk-dcomp-activate t)
  (setq skk-dcomp-multiple-activate t)
  (setq skk-henkan-strict-okuri-precedence t)

  ;; ã‚«ãƒ¼ã‚½ãƒ«ã®è‰²ã‚’å¤‰æ›´ã™ã‚‹
  (setq-default skk-cursor-latin-color "turquoise")
  (setq-default skk-cursor-hiragana-color "orange")
  (setq-default skk-cursor-katakana-color "systemGreenColor")

  (setq skk-show-mode-show t)
  (setq skk-show-mode-style "tooltip")

  (defun skk-isearch-setup-maybe ()
    (require 'skk-vars)
    (when (or (eq skk-isearch-mode-enable 'always)
  	    (and (boundp 'skk-mode)
  		 skk-mode
  		 skk-isearch-mode-enable))
      (skk-isearch-mode-setup)))

  (defun skk-isearch-cleanup-maybe ()
    (require 'skk-vars)
    (when (and (featurep 'skk-isearch)
  	     skk-isearch-mode-enable)
      (skk-isearch-mode-cleanup)))

  (add-hook 'isearch-mode-hook #'skk-isearch-setup-maybe)
  (add-hook 'isearch-mode-end-hook #'skk-isearch-cleanup-maybe)
  )

  ;; å­¦ç¿’
  (require 'skk-study)
#+end_src

* safe-local-variable-valuesã‚’custom-fileã«ä¿å­˜ã—ãªã„ãŸã‚ã«

safe-local-variable-valuesã‚’ä¿å­˜ã—ã¦ã—ã¾ã†ã¨ã€custom-fileãƒ•ã‚¡ã‚¤ãƒ«ã‚’Gitã«ç™»éŒ²ã§ããªããªã£ã¦ã—ã¾ã†ãŸã‚ã€safe-local-variable-valuesã¯custom-fileã«åæ˜ ã—ãªã„ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚

#+begin_src emacs-lisp
(setq-default enable-local-variables :all)
#+end_src

* Org Mode

Org Modeã¯å·¨å¤§ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã‚„è¡¨è¨ˆç®—ãªã©æ§˜ã€…ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã€‚

** org-clock

org-clockã¯ã‚¿ã‚¹ã‚¯(org-todo)ã®ä½œæ¥­æ™‚é–“ã®è¨ˆæ¸¬ã‚’è¡Œã†ã€‚ä½œæ¥­æ™‚é–“ã®è¨ˆæ¸¬ã‚’ç°¡
ç•¥åŒ–ã™ã‚‹ãŸã‚ã«ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(with-eval-after-load 'org-clock
  (define-key org-mode-map (kbd "M-i") #'org-clock-in)
  (define-key org-mode-map (kbd "M-o") #'org-clock-out)
  )
#+end_src

** org-agenda

org-agendaã¯ã‚¿ã‚¹ã‚¯ã®çŠ¶æ³ã‚’ä¸€è¦§ã§è¡¨ç¤ºã™ã‚‹ã€‚org-agendaã®ä¸€è¦§è¡¨ç¤ºã‹ã‚‰ã§ã‚‚
ä½œæ¥­ã‚’é–‹å§‹ã§ãã‚‹ã‚ˆã†ã«ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã€‚

#+begin_src emacs-lisp
(with-eval-after-load 'org-agenda
  (define-key org-agenda-mode-map (kbd "M-i") #'org-agenda-clock-in)
  (define-key org-agenda-mode-map (kbd "M-o") #'org-agenda-clock-out)
  )
#+end_src

* org-super-agenda

org-agendaã®ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’å¼·åŒ–ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ =org-super-agenda=
ãŒã‚ã‚‹ã€‚org-super-agendaã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã‚«ãƒ†ã‚´ãƒªåˆ¥ã«è¦‹ç©ã®å€¤ã‚’ãƒ©ãƒ™ãƒ«ã«
é›†è¨ˆã™ã‚‹ã‚ˆã†ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã€‚

#+begin_src emacs-lisp
(with-eval-after-load 'org-super-agenda

  (defun org-super-agenda-get-effort (item)
    (if-let ((item-todo-state (get-text-property 0 'todo-state item)))
        (get-text-property 0 'effort-minutes item-todo-state)))

  (defun org-super-agenda-summary-effort (items)
    (apply #'+
  	 (seq-filter
  	  (lambda (it) it)
  	  (mapcar #'org-super-agenda-get-effort items))))

  (defun org-super-agenda--make-agenda-header (name &optional items)
    "Return agenda header named NAME.
  If NAME is nil or `none', return empty string.  Otherwise, return
  string NAME prepended with `org-super-agenda-header-separator',
  which see.  NAME has the face `org-super-agenda-header' appended,
  and the text properties `keymap' and `local-map' set to the value
  of `org-super-agenda-header-map', which see."
    (pcase name
      ((or `nil 'none) "")
      (_ (let* ((properties (text-properties-at 0 name))
                (header (concat org-super-agenda-header-prefix name))
                (separator
                 (cl-etypecase org-super-agenda-header-separator
                   (character (concat (make-string (window-width) org-super-agenda-header-separator)
                                      "\n"))
                   (string org-super-agenda-header-separator))))
           (set-text-properties 0 (length header) properties header)
           (add-face-text-property 0 (length header) 'org-super-agenda-header t header)
           (org-add-props header org-super-agenda-header-properties
             'keymap org-super-agenda-header-map
             ;; NOTE: According to the manual, only `keymap' should be necessary, but in my
             ;; testing, it only takes effect in Agenda buffers when `local-map' is set, so
             ;; we'll use both.
             'local-map org-super-agenda-header-map)
           ;; Don't apply faces and properties to the separator part of the string.
           (concat separator header
  		 (format " (Effort => %d)"
  			 (org-super-agenda-summary-effort items)))))))

  (defun org-super-agenda--group-items (all-items)
    "Divide ALL-ITEMS into groups based on `org-super-agenda-groups'."
    (if (bound-and-true-p org-super-agenda-groups)
        ;; Transform groups
        (let ((org-super-agenda-groups (org-super-agenda--transform-groups org-super-agenda-groups)))
          ;; Collect and insert groups
          (cl-loop with section-name
                   for filter in org-super-agenda-groups
                   for custom-section-name = (plist-get filter :name)
                   for order = (or (plist-get filter :order) 0)  ; Lowest number first, 0 by default
                   for (auto-section-name non-matching matching) = (org-super-agenda--group-dispatch all-items filter)

                   do (when org-super-agenda-keep-order
                        (setf matching (sort matching #'org-entries-lessp)))

                   ;; Transformer
                   for transformer = (plist-get filter :transformer)
                   when transformer
                   do (setq matching (-map (pcase transformer
                                             (`(function ,transformer) transformer)
                                             ((pred symbolp) transformer)
                                             (_ `(lambda (it) ,transformer)))
                                           matching))

                   ;; Face
                   for face = (plist-get filter :face)
                   when face
                   do (let ((append (plist-get face :append)))
                        (when append (cl-remf face :append))
                        (--each matching
                          (add-face-text-property 0 (length it) face append it)))

                   ;; Auto category/group
                   if (cl-member auto-section-name org-super-agenda-auto-selector-keywords)
                   do (setq section-name (or custom-section-name "Auto category/group"))
                   and append (cl-loop for group in matching
                                       collect (list :name (plist-get group :name)
                                                     :items (plist-get group :items)
                                                     :order order))
                   into sections
                   and do (setq all-items non-matching)

                   ;; Manual groups
                   else
                   do (setq section-name (or custom-section-name auto-section-name))
                   and collect (list :name section-name :items matching :order order) into sections
                   and do (setq all-items non-matching)

                   ;; Sort sections by :order then :name
                   finally do (setq non-matching (list :name org-super-agenda-unmatched-name
                                                       :items non-matching
                                                       :order org-super-agenda-unmatched-order))
                   finally do (setq sections (--sort (let ((o-it (plist-get it :order))
                                                           (o-other (plist-get other :order)))
                                                       (cond ((and
                                                               ;; FIXME: This is now quite ugly.  I'm not sure that all of these tests
                                                               ;; are necessary, but at the moment it works, so I'm leaving it alone.
                                                               (equal o-it o-other)
                                                               (not (equal o-it 0))
                                                               (stringp (plist-get it :name))
                                                               (stringp (plist-get other :name)))
                                                              ;; Sort by string only for items with a set order
                                                              (string< (plist-get it :name)
                                                                       (plist-get other :name)))
                                                             ((and (numberp o-it)
                                                                   (numberp o-other))
                                                              (< o-it o-other))
                                                             (t nil)))
                                                     (push non-matching sections)))
                   ;; Insert sections
                   finally return (cl-loop for (_ name _ items) in sections
                                           when items
                                           collect (org-super-agenda--make-agenda-header name items)
                                           and append items)))
      ;; No super-filters; return list unmodified
      all-items))
      )
#+end_src

* indent-guide

[[https://github.com/zk-phi/indent-guide]]

ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®å´©ã‚Œã‚’ç¢ºèªã—ã‚„ã™ãã™ã‚‹ã€‚ãŸã ã—å¸¸ã«è¡¨ç¤ºã•ã‚Œã¦è¦‹ãŸç›®ã‚’æãªã„ãŸããªã„ãŸã‚ã€å¿…è¦ãªæ™‚ã«æœ‰åŠ¹ã«ã™ã‚‹ã€‚

* visual-fill-column

Auto Fillingã‚’é•·ã‚‰ãä½¿ç”¨ã—ã¦ããŸãŒã€ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ–ãƒ­ã‚°ç”¨ã«ãƒ¬ãƒ³ãƒ€ãƒ©ã«æ¸¡ã™ã¨æ”¹è¡ŒãŒç©ºç™½ã«å¤‰æ›ã•ã‚Œã€èª­ã¿ã«ãããªã‚‹ã€æ”¹è¡Œã®ã›ã„ã§æ¤œç´¢ãŒå›°é›£ã«ãªã‚‹ã€å·®åˆ†ã‚’åˆ¤æ–­ã—ã«ãã„ãªã©ã®ä¸éƒ½åˆãŒã‚ã£ãŸã€‚ã—ã‹ã—ã‚¨ãƒ‡ã‚£ã‚¿ã§èª­ã‚€å ´åˆã€é©å½“ãªè¡Œã§æŠ˜ã‚Šè¿”ã•ã‚Œã¦ã„ãªã„ã¨ã€ãã‚Œã¯ãã‚Œã§èª­ã¿ã«ãã„ã€‚toggle-truncate-linesã‚’ç”¨ã„ã¦æŠ˜ã‚Šè¿”ã™æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€ãã‚Œã¯ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã«å¾“ã£ã¦æŠ˜ã‚Šè¿”ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã‚’æ°—ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŒã€ãã‚Œã¯ãã‚Œã§é¢å€’ã ã€‚ãã®ãŸã‚ =visual-fill-column= ã‚’ç”¨ã„ã¦è¦‹ãŸç›®ä¸Šã®æŠ˜ã‚Šè¿”ã—ã‚’æ–‡å­—æ•°ã§æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

https://codeberg.org/joostkremers/visual-fill-column

#+begin_example emacs-lisp
package-install RET visual-fill-column RET
#+end_example


#+begin_src emacs-lisp
(with-eval-after-load 'visual-fill-column
  (add-hook 'visual-line-mode-hook #'visual-fill-column-mode)
  (setq-default visual-fill-column-center-text nil))
#+end_src

* è„šæ³¨

[fn:source-han-mono-repo] https://github.com/adobe-fonts/source-han-mono
[fn:mmm-mode-issue-112] [[https://github.com/purcell/mmm-mode/issues/112]]
[fn:mmm-mode-issue-112-wa] [[https://github.com/purcell/mmm-mode/issues/112#issuecomment-751926650]]
